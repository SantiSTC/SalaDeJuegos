import{$ as b,$a as ps,A as Me,B as ff,Ba as If,C as La,Da as ue,E as Kt,Ea as Ya,F as Mn,G as Nr,Ga as Tf,H as Va,Ha as Df,I as Fn,Ia as Af,J as pf,K as ds,L as At,M as Ua,N as gf,O as Ba,Oa as Sf,P as $a,Q as He,R as mf,S as ae,T as re,V as L,W as lt,X as yf,Y as X,Ya as Cf,Z as ja,Za as Or,_ as U,_a as bf,a as D,aa as De,ab as Ja,b as oe,ba as kr,bb as Rf,cb as Xa,da as vf,db as Za,e as Tt,ea as ht,eb as Mr,f as d,fa as za,fb as Pf,g as uf,ga as qa,h as Pa,i as Rr,ia as _f,j as Na,ja as fs,k as ka,ka as Qt,l as Wt,la as Ga,m as ke,n as cf,o as lf,oa as Ha,p as Dt,pa as dt,q as Oa,qa as Wa,r as Ma,s as Fa,sa as Yt,t as Oe,ta as wf,u as N,ua as Ka,v as Pr,va as Ef,w as hf,wa as St,x as df,xa as Qa,y as j,ya as xn,z as xa}from"./chunk-XSTIV2NF.js";var Ff=null;function Ln(){return Ff}function xf(t){Ff??=t}var gs=class{};var Fe=new X(""),Lf=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>b(__),providedIn:"platform"});let t=e;return t})();var __=(()=>{let e=class e extends Lf{constructor(){super(),this._doc=b(Fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ln().getBaseHref(this._doc)}onPopState(r){let i=Ln().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ln().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Vf(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Nf(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Jt(t){return t&&t[0]!=="?"?"?"+t:t}var ys=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>b(Uf),providedIn:"root"});let t=e;return t})(),w_=new X(""),Uf=(()=>{let e=class e extends ys{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??b(Fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Vf(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Jt(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Jt(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Jt(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(Lf),U(w_,8))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fr=(()=>{let e=class e{constructor(r){this._subject=new Yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=T_(Nf(kf(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Jt(i))}normalize(r){return e.stripTrailingSlash(I_(this._basePath,kf(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jt(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jt(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Jt,e.joinWithSlash=Vf,e.stripTrailingSlash=Nf,e.\u0275fac=function(i){return new(i||e)(U(ys))},e.\u0275prov=L({token:e,factory:()=>E_(),providedIn:"root"});let t=e;return t})();function E_(){return new Fr(U(ys))}function I_(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function kf(t){return t.replace(/\/index.html$/,"")}function T_(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Bf(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var $f="browser",D_="server";function eu(t){return t===D_}var ms=class{};var ru=class extends gs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},iu=class t extends ru{static makeCurrent(){xf(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=S_();return n==null?null:C_(n)}resetBaseElement(){xr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Bf(document.cookie,e)}},xr=null;function S_(){return xr=xr||document.querySelector("base"),xr?xr.getAttribute("href"):null}function C_(t){return new URL(t,document.baseURI).pathname}var b_=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),su=new X(""),Gf=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new re(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(U(su),U(ue))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),vs=class{constructor(e){this._doc=e}},tu="ng-app-id",Hf=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=eu(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${tu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(tu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(tu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(U(Fe),U(Ka),U(Qa,8),U(St))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),nu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},au=/%COMP%/g,Wf="%COMP%",R_=`_nghost-${Wf}`,P_=`_ngcontent-${Wf}`,N_=!0,k_=new X("",{providedIn:"root",factory:()=>N_});function O_(t){return P_.replace(au,t)}function M_(t){return R_.replace(au,t)}function Kf(t,e){return e.map(n=>n.replace(au,t))}var jf=(()=>{let e=class e{constructor(r,i,s,o,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=eu(u),this.defaultRenderer=new Lr(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===kr.ShadowDom&&(i=oe(D({},i),{encapsulation:kr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof _s?s.applyToHost(r):s instanceof Vr&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case kr.Emulated:o=new _s(c,l,i,this.appId,h,a,u,f);break;case kr.ShadowDom:return new ou(c,l,r,i,a,u,this.nonce,f);default:o=new Vr(c,l,i,h,a,u,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(U(Gf),U(Hf),U(Ka),U(k_),U(Fe),U(St),U(ue),U(Qa))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Lr=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(nu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(zf(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(zf(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=nu[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=nu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xn.DashCase|xn.Important)?e.style.setProperty(n,r,i&xn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ln().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function zf(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ou=class extends Lr{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Kf(i.id,i.styles);for(let l of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vr=class extends Lr{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Kf(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_s=class extends Vr{constructor(e,n,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=O_(c),this.hostAttr=M_(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},F_=(()=>{let e=class e extends vs{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(U(Fe))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),qf=["alt","control","meta","shift"],x_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},L_={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},V_=(()=>{let e=class e extends vs{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ln().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),qf.forEach(l=>{let h=i.indexOf(l);h>-1&&(i.splice(h,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=x_[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),qf.forEach(a=>{if(a!==s){let u=L_[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(U(Fe))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})();function zb(t,e){return Pf(D({rootComponent:t},U_(e)))}function U_(t){return{appProviders:[...q_,...t?.providers??[]],platformProviders:z_}}function B_(){iu.makeCurrent()}function $_(){return new Wa}function j_(){return wf(document),document}var z_=[{provide:St,useValue:$f},{provide:Ef,useValue:B_,multi:!0},{provide:Fe,useFactory:j_,deps:[]}];var q_=[{provide:_f,useValue:"root"},{provide:Wa,useFactory:$_,deps:[]},{provide:su,useClass:F_,multi:!0,deps:[Fe,ue,St]},{provide:su,useClass:V_,multi:!0,deps:[Fe]},jf,Hf,Gf,{provide:If,useExisting:jf},{provide:ms,useClass:b_,deps:[]},[]];var Qf=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(U(Fe))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var k="primary",Zr=Symbol("RouteTitle"),du=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zn(t){return new du(t)}function H_(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function W_(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!We(t[n],e[n]))return!1;return!0}function We(t,e){let n=t?fu(t):void 0,r=e?fu(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!tp(t[i],e[i]))return!1;return!0}function fu(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function tp(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function np(t){return t.length>0?t[t.length-1]:null}function Rt(t){return hf(t)?t:Ja(t)?Oe(Promise.resolve(t)):N(t)}var K_={exact:ip,subset:sp},rp={exact:Q_,subset:Y_,ignored:()=>!0};function Yf(t,e,n){return K_[n.paths](t.root,e.root,n.matrixParams)&&rp[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Q_(t,e){return We(t,e)}function ip(t,e,n){if(!Zt(t.segments,e.segments)||!Is(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ip(t.children[r],e.children[r],n))return!1;return!0}function Y_(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>tp(t[n],e[n]))}function sp(t,e,n){return op(t,e,e.segments,n)}function op(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Zt(i,n)||e.hasChildren()||!Is(i,n,r))}else if(t.segments.length===n.length){if(!Zt(t.segments,n)||!Is(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!sp(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Zt(t.segments,i)||!Is(t.segments,i,r)||!t.children[k]?!1:op(t.children[k],e,s,r)}}function Is(t,e,n){return e.every((r,i)=>rp[n](t[i].parameters,r.parameters))}var Ct=class{constructor(e=new B([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zn(this.queryParams),this._queryParamMap}toString(){return Z_.serialize(this)}},B=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ts(this)}},Xt=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=zn(this.parameters),this._parameterMap}toString(){return up(this)}};function J_(t,e){return Zt(t,e)&&t.every((n,r)=>We(n.parameters,e[r].parameters))}function Zt(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function X_(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===k&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==k&&(n=n.concat(e(i,r)))}),n}var Uu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>new As,providedIn:"root"});let t=e;return t})(),As=class{parse(e){let n=new gu(e);return new Ct(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ur(e.root,!0)}`,r=nw(e.queryParams),i=typeof e.fragment=="string"?`#${ew(e.fragment)}`:"";return`${n}${r}${i}`}},Z_=new As;function Ts(t){return t.segments.map(e=>up(e)).join("/")}function Ur(t,e){if(!t.hasChildren())return Ts(t);if(e){let n=t.children[k]?Ur(t.children[k],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==k&&r.push(`${i}:${Ur(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=X_(t,(r,i)=>i===k?[Ur(t.children[k],!1)]:[`${i}:${Ur(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[k]!=null?`${Ts(t)}/${n[0]}`:`${Ts(t)}/(${n.join("//")})`}}function ap(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ws(t){return ap(t).replace(/%3B/gi,";")}function ew(t){return encodeURI(t)}function pu(t){return ap(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ds(t){return decodeURIComponent(t)}function Jf(t){return Ds(t.replace(/\+/g,"%20"))}function up(t){return`${pu(t.path)}${tw(t.parameters)}`}function tw(t){return Object.entries(t).map(([e,n])=>`;${pu(e)}=${pu(n)}`).join("")}function nw(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ws(n)}=${ws(i)}`).join("&"):`${ws(n)}=${ws(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var rw=/^[^\/()?;#]+/;function uu(t){let e=t.match(rw);return e?e[0]:""}var iw=/^[^\/()?;=#]+/;function sw(t){let e=t.match(iw);return e?e[0]:""}var ow=/^[^=?&#]+/;function aw(t){let e=t.match(ow);return e?e[0]:""}var uw=/^[^&#]+/;function cw(t){let e=t.match(uw);return e?e[0]:""}var gu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new B([],{}):new B([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[k]=new B(e,n)),r}parseSegment(){let e=uu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Xt(Ds(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=sw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=uu(this.remaining);i&&(r=i,this.capture(r))}e[Ds(n)]=Ds(r)}parseQueryParam(e){let n=aw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=cw(this.remaining);o&&(r=o,this.capture(r))}let i=Jf(n),s=Jf(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=uu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=k);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[k]:new B([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function cp(t){return t.segments.length>0?new B([],{[k]:t}):t}function lp(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=lp(i);if(r===k&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new B(t.segments,e);return lw(n)}function lw(t){if(t.numberOfChildren===1&&t.children[k]){let e=t.children[k];return new B(t.segments.concat(e.segments),e.children)}return t}function qn(t){return t instanceof Ct}function hw(t,e,n=null,r=null){let i=hp(t);return dp(i,e,n,r)}function hp(t){let e;function n(s){let o={};for(let u of s.children){let c=n(u);o[u.outlet]=c}let a=new B(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=cp(r);return e??i}function dp(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return cu(i,i,i,n,r);let s=dw(e);if(s.toRoot())return cu(i,i,new B([],{}),n,r);let o=fw(s,i,t),a=o.processChildren?jr(o.segmentGroup,o.index,s.commands):pp(o.segmentGroup,o.index,s.commands);return cu(i,o.segmentGroup,a,n,r)}function Ss(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Gr(t){return typeof t=="object"&&t!=null&&t.outlets}function cu(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;t===e?o=n:o=fp(t,e,n);let a=cp(lp(o));return new Ct(a,s,i)}function fp(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=fp(s,e,n)}),new B(t.segments,r)}var Cs=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ss(r[0]))throw new re(4003,!1);let i=r.find(Gr);if(i&&i!==np(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dw(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cs(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Cs(n,e,r)}var $n=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function fw(t,e,n){if(t.isAbsolute)return new $n(e,!0,0);if(!n)return new $n(e,!1,NaN);if(n.parent===null)return new $n(n,!0,0);let r=Ss(t.commands[0])?0:1,i=n.segments.length-1+r;return pw(n,i,t.numberOfDoubleDots)}function pw(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new $n(r,!1,i-s)}function gw(t){return Gr(t[0])?t[0].outlets:{[k]:t}}function pp(t,e,n){if(t??=new B([],{}),t.segments.length===0&&t.hasChildren())return jr(t,e,n);let r=mw(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new B(t.segments.slice(0,r.pathIndex),{});return s.children[k]=new B(t.segments.slice(r.pathIndex),t.children),jr(s,0,i)}else return r.match&&i.length===0?new B(t.segments,{}):r.match&&!t.hasChildren()?mu(t,e,n):r.match?jr(t,0,i):mu(t,e,n)}function jr(t,e,n){if(n.length===0)return new B(t.segments,{});{let r=gw(n),i={};if(Object.keys(r).some(s=>s!==k)&&t.children[k]&&t.numberOfChildren===1&&t.children[k].segments.length===0){let s=jr(t.children[k],e,n);return new B(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=pp(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new B(t.segments,i)}}function mw(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Gr(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!Zf(u,c,o))return s;r+=2}else{if(!Zf(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mu(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Gr(s)){let u=yw(s.outlets);return new B(r,u)}if(i===0&&Ss(n[0])){let u=t.segments[e];r.push(new Xt(u.path,Xf(n[0]))),i++;continue}let o=Gr(s)?s.outlets[k]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ss(a)?(r.push(new Xt(o,Xf(a))),i+=2):(r.push(new Xt(o,{})),i++)}return new B(r,{})}function yw(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=mu(new B([],{}),0,r))}),e}function Xf(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Zf(t,e,n){return t==n.path&&We(e,n.parameters)}var zr="imperative",de=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(de||{}),xe=class{constructor(e,n){this.id=e,this.url=n}},Hr=class extends xe{constructor(e,n,r="imperative",i=null){super(e,n),this.type=de.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},en=class extends xe{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=de.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ce=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ce||{}),yu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(yu||{}),bt=class extends xe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=de.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},tn=class extends xe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=de.NavigationSkipped}},Wr=class extends xe{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=de.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bs=class extends xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vu=class extends xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_u=class extends xe{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=de.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wu=class extends xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eu=class extends xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iu=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Tu=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Du=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Au=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Su=class{constructor(e){this.snapshot=e,this.type=de.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cu=class{constructor(e){this.snapshot=e,this.type=de.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Kr=class{},Qr=class{constructor(e){this.url=e}};var bu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ms,this.attachRef=null}},Ms=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new bu,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rs=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ru(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ru(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Pu(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Pu(e,this._root).map(n=>n.value)}};function Ru(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ru(t,n);if(r)return r}return null}function Pu(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Pu(t,n);if(r.length)return r.unshift(e),r}return[]}var Se=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Bn(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ps=class extends Rs{constructor(e,n){super(e),this.snapshot=n,$u(this,e)}toString(){return this.snapshot.toString()}};function gp(t){let e=vw(t),n=new ke([new Xt("",{})]),r=new ke({}),i=new ke({}),s=new ke({}),o=new ke(""),a=new Gn(n,r,s,o,i,k,t,e.root);return a.snapshot=e.root,new Ps(new Se(a,[]),e)}function vw(t){let e={},n={},r={},i="",s=new Yr([],e,r,i,n,k,t,null,{});return new Ns("",new Se(s,[]))}var Gn=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(j(c=>c[Zr]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>zn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>zn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),t.params),data:D(D({},e.data),t.data),resolve:D(D(D(D({},t.data),e.data),i?.data),t._resolvedData)}:r={params:D({},t.params),data:D({},t.data),resolve:D(D({},t.data),t._resolvedData??{})},i&&yp(i)&&(r.resolve[Zr]=i.title),r}var Yr=class{get title(){return this.data?.[Zr]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ns=class extends Rs{constructor(e,n){super(n),this.url=e,$u(this,n)}toString(){return mp(this._root)}};function $u(t,e){e.value._routerState=t,e.children.forEach(n=>$u(t,n))}function mp(t){let e=t.children.length>0?` { ${t.children.map(mp).join(", ")} } `:"";return`${t.value}${e}`}function lu(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,We(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),We(e.params,n.params)||t.paramsSubject.next(n.params),W_(e.url,n.url)||t.urlSubject.next(n.url),We(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Nu(t,e){let n=We(t.params,e.params)&&J_(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Nu(t.parent,e.parent))}function yp(t){return typeof t.title=="string"||t.title===null}var _w=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=k,this.activateEvents=new Yt,this.deactivateEvents=new Yt,this.attachEvents=new Yt,this.detachEvents=new Yt,this.parentContexts=b(Ms),this.location=b(Ya),this.changeDetector=b(Mr),this.environmentInjector=b(fs),this.inputBinder=b(ju,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new ku(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=za({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ga]});let t=e;return t})(),ku=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Gn?this.route:e===Ms?this.childContexts:this.parent.get(e,n)}},ju=new X("");function ww(t,e,n){let r=Jr(t,e._root,n?n._root:void 0);return new Ps(r,e)}function Jr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Ew(t,e,n);return new Se(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Jr(t,a)),o}}let r=Iw(e.value),i=e.children.map(s=>Jr(t,s));return new Se(r,i)}}function Ew(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Jr(t,r,i);return Jr(t,r)})}function Iw(t){return new Gn(new ke(t.url),new ke(t.params),new ke(t.queryParams),new ke(t.fragment),new ke(t.data),t.outlet,t.component,t)}var vp="ngNavigationCancelingError";function _p(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=qn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wp(!1,Ce.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function wp(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[vp]=!0,n.cancellationCode=e,n}function Tw(t){return Ep(t)&&qn(t.url)}function Ep(t){return!!t&&t[vp]}var Dw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vf({type:e,selectors:[["ng-component"]],standalone:!0,features:[Cf],decls:1,vars:0,template:function(i,s){i&1&&Sf(0,"router-outlet")},dependencies:[_w],encapsulation:2});let t=e;return t})();function Aw(t,e){return t.providers&&!t._injector&&(t._injector=Df(t.providers,e,`Route: ${t.path}`)),t._injector??e}function zu(t){let e=t.children&&t.children.map(zu),n=e?oe(D({},t),{children:e}):D({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==k&&(n.component=Dw),n}function Ke(t){return t.outlet||k}function Sw(t,e){let n=t.filter(r=>Ke(r)===e);return n.push(...t.filter(r=>Ke(r)!==e)),n}function ei(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Cw=(t,e,n,r)=>j(i=>(new Ou(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ou=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),lu(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Bn(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Bn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Bn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Bn(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Cu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Au(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(lu(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),lu(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ei(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},ks=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jn=class{constructor(e,n){this.component=e,this.route=n}};function bw(t,e,n){let r=t._root,i=e?e._root:null;return Br(r,i,n,[r.value])}function Rw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wn(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!yf(t)?t:e.get(t):r}function Br(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Bn(e);return t.children.forEach(o=>{Pw(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qr(a,n.getContext(o),i)),i}function Pw(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Nw(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ks(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Br(t,e,a?a.children:null,r,i):Br(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jn(a.outlet.component,o))}else o&&qr(e,a,i),i.canActivateChecks.push(new ks(r)),s.component?Br(t,null,a?a.children:null,r,i):Br(t,null,n,r,i);return i}function Nw(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Zt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zt(t.url,e.url)||!We(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nu(t,e)||!We(t.queryParams,e.queryParams);case"paramsChange":default:return!Nu(t,e)}}function qr(t,e,n){let r=Bn(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?qr(o,e.children.getContext(s),n):qr(o,null,n):qr(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new jn(e.outlet.component,i)):n.canDeactivateChecks.push(new jn(null,i)):n.canDeactivateChecks.push(new jn(null,i))}function ti(t){return typeof t=="function"}function kw(t){return typeof t=="boolean"}function Ow(t){return t&&ti(t.canLoad)}function Mw(t){return t&&ti(t.canActivate)}function Fw(t){return t&&ti(t.canActivateChild)}function xw(t){return t&&ti(t.canDeactivate)}function Lw(t){return t&&ti(t.canMatch)}function Ip(t){return t instanceof df||t?.name==="EmptyError"}var Es=Symbol("INITIAL_VALUE");function Hn(){return He(t=>xa(t.map(e=>e.pipe(Fn(1),$a(Es)))).pipe(j(e=>{for(let n of e)if(n!==!0){if(n===Es)return Es;if(n===!1||n instanceof Ct)return n}return!0}),Kt(e=>e!==Es),Fn(1)))}function Vw(t,e){return Me(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(oe(D({},n),{guardsResult:!0})):Uw(o,r,i,t).pipe(Me(a=>a&&kw(a)?Bw(r,s,t,e):N(a)),j(a=>oe(D({},n),{guardsResult:a})))})}function Uw(t,e,n,r){return Oe(t).pipe(Me(i=>Gw(i.component,i.route,n,e,r)),At(i=>i!==!0,!0))}function Bw(t,e,n,r){return Oe(e).pipe(Nr(i=>ff(jw(i.route.parent,r),$w(i.route,r),qw(t,i.path,n),zw(t,i.route,n))),At(i=>i!==!0,!0))}function $w(t,e){return t!==null&&e&&e(new Su(t)),N(!0)}function jw(t,e){return t!==null&&e&&e(new Du(t)),N(!0)}function zw(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(s=>La(()=>{let o=ei(e)??n,a=Wn(s,o),u=Mw(a)?a.canActivate(e,t):Qt(o,()=>a(e,t));return Rt(u).pipe(At())}));return N(i).pipe(Hn())}function qw(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Rw(o)).filter(o=>o!==null).map(o=>La(()=>{let a=o.guards.map(u=>{let c=ei(o.node)??n,l=Wn(u,c),h=Fw(l)?l.canActivateChild(r,t):Qt(c,()=>l(r,t));return Rt(h).pipe(At())});return N(a).pipe(Hn())}));return N(s).pipe(Hn())}function Gw(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let u=ei(e)??i,c=Wn(a,u),l=xw(c)?c.canDeactivate(t,e,n,r):Qt(u,()=>c(t,e,n,r));return Rt(l).pipe(At())});return N(o).pipe(Hn())}function Hw(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let s=i.map(o=>{let a=Wn(o,t),u=Ow(a)?a.canLoad(e,n):Qt(t,()=>a(e,n));return Rt(u)});return N(s).pipe(Hn(),Tp(r))}function Tp(t){return Pa(ae(e=>{if(qn(e))throw _p(t,e)}),j(e=>e===!0))}function Ww(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let s=i.map(o=>{let a=Wn(o,t),u=Lw(a)?a.canMatch(e,n):Qt(t,()=>a(e,n));return Rt(u)});return N(s).pipe(Hn(),Tp(r))}var Xr=class{constructor(e){this.segmentGroup=e||null}},Os=class extends Error{constructor(e){super(),this.urlTree=e}};function Un(t){return Pr(new Xr(t))}function Kw(t){return Pr(new re(4e3,!1))}function Qw(t){return Pr(wp(!1,Ce.GuardRejected))}var Mu=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[k])return Kw(e.redirectTo);i=i.children[k]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Os(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ct(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new B(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Fu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yw(t,e,n,r,i){let s=qu(t,e,n);return s.matched?(r=Aw(e,r),Ww(r,e,n,i).pipe(j(o=>o===!0?s:D({},Fu)))):N(s)}function qu(t,e,n){if(e.path==="**")return Jw(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?D({},Fu):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||H_)(n,t,e);if(!i)return D({},Fu);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?D(D({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Jw(t){return{matched:!0,parameters:t.length>0?np(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ep(t,e,n,r){return n.length>0&&eE(t,n,r)?{segmentGroup:new B(e,Zw(r,new B(n,t.children))),slicedSegments:[]}:n.length===0&&tE(t,n,r)?{segmentGroup:new B(t.segments,Xw(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new B(t.segments,t.children),slicedSegments:n}}function Xw(t,e,n,r){let i={};for(let s of n)if(Fs(t,e,s)&&!r[Ke(s)]){let o=new B([],{});i[Ke(s)]=o}return D(D({},r),i)}function Zw(t,e){let n={};n[k]=e;for(let r of t)if(r.path===""&&Ke(r)!==k){let i=new B([],{});n[Ke(r)]=i}return n}function eE(t,e,n){return n.some(r=>Fs(t,e,r)&&Ke(r)!==k)}function tE(t,e,n){return n.some(r=>Fs(t,e,r))}function Fs(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function nE(t,e,n,r){return Ke(t)!==r&&(r===k||!Fs(e,n,t))?!1:qu(e,t,n).matched}function rE(t,e,n){return e.length===0&&!t.children[n]}var xu=class{};function iE(t,e,n,r,i,s,o="emptyOnly"){return new Lu(t,e,n,r,i,o,s).recognize()}var sE=31,Lu=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Mu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=ep(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(n=>{let r=new Yr([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,{},k,this.rootComponentType,null,{}),i=new Se(r,n),s=new Ns("",i),o=hw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,k).pipe(Mn(r=>{if(r instanceof Os)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xr?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Bu(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(j(s=>s instanceof Se?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Oe(i).pipe(Nr(s=>{let o=r.children[s],a=Sw(n,s);return this.processSegmentGroup(e,a,o,s)}),Ba((s,o)=>(s.push(...o),s)),Va(null),gf(),Me(s=>{if(s===null)return Un(r);let o=Dp(s);return oE(o),N(o)}))}processSegment(e,n,r,i,s,o){return Oe(n).pipe(Nr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Mn(u=>{if(u instanceof Xr)return N(null);throw u}))),At(a=>!!a),Mn(a=>{if(Ip(a))return rE(r,i,s)?N(new xu):Un(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return nE(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Un(i):Un(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=qu(n,i,s);if(!a)return Un(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sE&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe(Me(f=>this.processSegment(e,r,n,f.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=Yw(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(He(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:h,parameters:f}=a,p=new Yr(l,f,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,uE(r),Ke(r),r.component??r._loadedComponent??null,r,cE(r)),{segmentGroup:E,slicedSegments:I}=ep(n,l,h,u);if(I.length===0&&E.hasChildren())return this.processChildren(c,u,E).pipe(j(O=>O===null?null:new Se(p,O)));if(u.length===0&&I.length===0)return N(new Se(p,[]));let w=Ke(r)===s;return this.processSegment(c,u,E,I,w?k:s,!0).pipe(j(O=>new Se(p,O instanceof Se?[O]:[])))}))):Un(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):Hw(e,n,r,this.urlSerializer).pipe(Me(i=>i?this.configLoader.loadChildren(e,n).pipe(ae(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Qw(n))):N({routes:[],injector:e})}};function oE(t){t.sort((e,n)=>e.value.outlet===k?-1:n.value.outlet===k?1:e.value.outlet.localeCompare(n.value.outlet))}function aE(t){let e=t.value.routeConfig;return e&&e.path===""}function Dp(t){let e=[],n=new Set;for(let r of t){if(!aE(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Dp(r.children);e.push(new Se(r.value,i))}return e.filter(r=>!n.has(r))}function uE(t){return t.data||{}}function cE(t){return t.resolve||{}}function lE(t,e,n,r,i,s){return Me(o=>iE(t,e,n,r,o.extractedUrl,i,s).pipe(j(({state:a,tree:u})=>oe(D({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function hE(t,e){return Me(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of Ap(u))o.add(c);let a=0;return Oe(o).pipe(Nr(u=>s.has(u)?dE(u,r,t,e):(u.data=Bu(u,u.parent,t).resolve,N(void 0))),ae(()=>a++),Ua(1),Me(u=>a===o.size?N(n):Dt))})}function Ap(t){let e=t.children.map(n=>Ap(n)).flat();return[t,...e]}function dE(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!yp(i)&&(s[Zr]=i.title),fE(s,t,e,r).pipe(j(o=>(t._resolvedData=o,t.data=Bu(t,t.parent,n).resolve,null)))}function fE(t,e,n,r){let i=fu(t);if(i.length===0)return N({});let s={};return Oe(i).pipe(Me(o=>pE(t[o],e,n,r).pipe(At(),ae(a=>{s[o]=a}))),Ua(1),pf(s),Mn(o=>Ip(o)?Dt:Pr(o)))}function pE(t,e,n,r){let i=ei(e)??r,s=Wn(t,i),o=s.resolve?s.resolve(e,n):Qt(i,()=>s(e,n));return Rt(o)}function hu(t){return He(e=>{let n=t(e);return n?Oe(n).pipe(j(()=>e)):N(e)})}var Sp=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===k);return i}getResolvedTitleForRoute(r){return r.data[Zr]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>b(gE),providedIn:"root"});let t=e;return t})(),gE=(()=>{let e=class e extends Sp{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(U(Qf))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gu=new X("",{providedIn:"root",factory:()=>({})}),Hu=new X(""),mE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(Za)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Rt(r.loadComponent()).pipe(j(Cp),ae(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ds(()=>{this.componentLoaders.delete(r)})),s=new ka(i,()=>new Wt).pipe(Na());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=yE(i,this.compiler,r,this.onLoadEndListener).pipe(ds(()=>{this.childrenLoaders.delete(i)})),a=new ka(o,()=>new Wt).pipe(Na());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yE(t,e,n,r){return Rt(t.loadChildren()).pipe(j(Cp),Me(i=>i instanceof Tf||Array.isArray(i)?N(i):Oe(e.compileModuleAsync(i))),j(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Hu,[],{optional:!0,self:!0}).flat()),{routes:o.map(zu),injector:s}}))}function vE(t){return t&&typeof t=="object"&&"default"in t}function Cp(t){return vE(t)?t.default:t}var Wu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>b(_E),providedIn:"root"});let t=e;return t})(),_E=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wE=new X("");var EE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Wt,this.transitionAbortSubject=new Wt,this.configLoader=b(mE),this.environmentInjector=b(fs),this.urlSerializer=b(Uu),this.rootContexts=b(Ms),this.location=b(Fr),this.inputBindingEnabled=b(ju,{optional:!0})!==null,this.titleStrategy=b(Sp),this.options=b(Gu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(Wu),this.createViewTransition=b(wE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Iu(s)),i=s=>this.events.next(new Tu(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(oe(D(D({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ke({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zr,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kt(o=>o.id!==0),j(o=>oe(D({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),He(o=>{let a=!1,u=!1;return N(o).pipe(He(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ce.SupersededByNewNavigation),Dt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?oe(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new tn(c.id,this.urlSerializer.serialize(c.rawUrl),f,yu.IgnoredSameUrlNavigation)),c.resolve(null),Dt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(He(f=>{let p=this.transitions?.getValue();return this.events.next(new Hr(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?Dt:Promise.resolve(f)}),lE(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ae(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=oe(D({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new bs(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:E,restoredState:I,extras:w}=c,O=new Hr(f,this.urlSerializer.serialize(p),E,I);this.events.next(O);let z=gp(this.rootComponentType).snapshot;return this.currentTransition=o=oe(D({},c),{targetSnapshot:z,urlAfterRedirects:p,extras:oe(D({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,N(o)}else{let f="";return this.events.next(new tn(c.id,this.urlSerializer.serialize(c.extractedUrl),f,yu.IgnoredByUrlHandlingStrategy)),c.resolve(null),Dt}}),ae(c=>{let l=new vu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),j(c=>(this.currentTransition=o=oe(D({},c),{guards:bw(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Vw(this.environmentInjector,c=>this.events.next(c)),ae(c=>{if(o.guardsResult=c.guardsResult,qn(c.guardsResult))throw _p(this.urlSerializer,c.guardsResult);let l=new _u(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Kt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ce.GuardRejected),!1)),hu(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(ae(l=>{let h=new wu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),He(l=>{let h=!1;return N(l).pipe(hE(this.paramsInheritanceStrategy,this.environmentInjector),ae({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ce.NoDataFromResolver)}}))}),ae(l=>{let h=new Eu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),hu(c=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(ae(p=>{h.component=p}),j(()=>{})));for(let p of h.children)f.push(...l(p));return f};return xa(l(c.targetSnapshot.root)).pipe(Va(null),Fn(1))}),hu(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Oe(h).pipe(j(()=>o)):N(o)}),j(c=>{let l=ww(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=oe(D({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ae(()=>{this.events.next(new Kr)}),Cw(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Fn(1),ae({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new en(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),mf(this.transitionAbortSubject.pipe(ae(c=>{throw c}))),ds(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Ce.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Mn(c=>{if(u=!0,Ep(c))this.events.next(new bt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Tw(c)?this.events.next(new Qr(c.url)):o.resolve(!1);else{this.events.next(new Wr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Dt}))}))}cancelNavigationTransition(r,i,s){let o=new bt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IE(t){return t!==zr}var TE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>b(DE),providedIn:"root"});let t=e;return t})(),Vu=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},DE=(()=>{let e=class e extends Vu{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ha(e)))(s||e)}})(),e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:()=>b(AE),providedIn:"root"});let t=e;return t})(),AE=(()=>{let e=class e extends bp{constructor(){super(...arguments),this.location=b(Fr),this.urlSerializer=b(Uu),this.options=b(Gu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(Wu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ct,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Hr)this.stateMemento=this.createStateMemento();else if(r instanceof tn)this.rawUrlTree=i.initialUrl;else if(r instanceof bs){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Kr?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof bt&&(r.code===Ce.GuardRejected||r.code===Ce.NoDataFromResolver)?this.restoreHistory(i):r instanceof Wr?this.restoreHistory(i,!0):r instanceof en&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=D(D({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=D(D({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ha(e)))(s||e)}})(),e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$r=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}($r||{});function SE(t,e){t.events.pipe(Kt(n=>n instanceof en||n instanceof bt||n instanceof Wr||n instanceof tn),j(n=>n instanceof en||n instanceof tn?$r.COMPLETE:(n instanceof bt?n.code===Ce.Redirect||n.code===Ce.SupersededByNewNavigation:!1)?$r.REDIRECTING:$r.FAILED),Kt(n=>n!==$r.REDIRECTING),Fn(1)).subscribe(()=>{e()})}function CE(t){throw t}var bE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rp=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(ps),this.stateManager=b(bp),this.options=b(Gu,{optional:!0})||{},this.pendingTasks=b(Af),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(EE),this.urlSerializer=b(Uu),this.location=b(Fr),this.urlHandlingStrategy=b(Wu),this._events=new Wt,this.errorHandler=this.options.errorHandler||CE,this.navigated=!1,this.routeReuseStrategy=b(TE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(Hu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(ju,{optional:!0}),this.eventsSubscription=new uf,this.isNgZoneEnabled=b(ue)instanceof ue&&ue.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof bt&&i.code!==Ce.Redirect&&i.code!==Ce.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof en)this.navigated=!0;else if(i instanceof Qr){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||IE(s.source)};this.scheduleNavigation(a,zr,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}NE(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=D({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(zu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,h=null;switch(u){case"merge":h=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=s?s.snapshot:this.routerState.snapshot.root;f=hp(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return dp(f,r,h,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=qn(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,zr,null,i)}navigate(r,i={skipLocationChange:!1}){return PE(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=D({},bE):i===!1?s=D({},RE):s=i,qn(r))return Yf(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Yf(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((f,p)=>{u=f,c=p});let h=this.pendingTasks.add();return SE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PE(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new re(4008,!1)}function NE(t){return!(t instanceof Kr)&&!(t instanceof Qr)}var kE=new X("");function TR(t,...e){return qa([{provide:Hu,multi:!0,useValue:t},[],{provide:Gn,useFactory:OE,deps:[Rp]},{provide:Rf,multi:!0,useFactory:ME},e.map(n=>n.\u0275providers)])}function OE(t){return t.routerState.root}function ME(){let t=b(dt);return e=>{let n=t.get(Xa);if(e!==n.components[0])return;let r=t.get(Rp),i=t.get(FE);t.get(xE)===1&&r.initialNavigation(),t.get(LE,null,ja.Optional)?.setUpPreloading(),t.get(kE,null,ja.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FE=new X("",{factory:()=>new Wt}),xE=new X("",{providedIn:"root",factory:()=>1});var LE=new X("");var Np=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VE=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,p=c&63;u||(p=64,o||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Np(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new Qu;let f=s<<2|a>>4;if(r.push(f),c!==64){let p=a<<4&240|c>>2;if(r.push(p),h!==64){let E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Qu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},UE=function(t){let e=Np(t);return kp.encodeByteArray(e,!0)},ni=function(t){return UE(t).replace(/\./g,"")},Ju=function(t){try{return kp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function BE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $E=()=>BE().__FIREBASE_DEFAULTS__,jE=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ju(t[1]);return e&&JSON.parse(e)},Ls=()=>{try{return $E()||jE()||zE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xu=t=>{var e,n;return(n=(e=Ls())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Op=t=>{let e=Xu(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zu=()=>{var t;return(t=Ls())===null||t===void 0?void 0:t.config},ec=t=>{var e;return(e=Ls())===null||e===void 0?void 0:e[`_${t}`]};var xs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Mp(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ni(JSON.stringify(n)),ni(JSON.stringify(o)),""].join(".")}function W(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(W())}function qE(){var t;let e=(t=Ls())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xp(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Lp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vp(){let t=W();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Up(){return!qE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vs(){try{return typeof indexedDB=="object"}catch{return!1}}function Bp(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var GE="FirebaseError",be=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GE,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}},ft=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HE(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new be(i,a,r)}};function HE(t,e){return t.replace(WE,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WE=/\{\$([^}]+)}/g;function $p(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Pp(s)&&Pp(o)){if(!nn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Pp(t){return t!==null&&typeof t=="object"}function ri(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kn(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Qn(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jp(t,e){let n=new Yu(t,e);return n.subscribe.bind(n)}var Yu=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KE(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ku),i.error===void 0&&(i.error=Ku),i.complete===void 0&&(i.complete=Ku);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KE(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ku(){}var SR=4*60*60*1e3;function Z(t){return t&&t._delegate?t._delegate:t}var Le=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var rn="[DEFAULT]";var tc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new xs;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YE(e))try{this.getOrInitializeService({instanceIdentifier:rn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return d(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=rn){return this.instances.has(e)}getOptions(e=rn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rn){return this.component?this.component.multipleInstances?e:rn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function QE(t){return t===rn?void 0:t}function YE(t){return t.instantiationMode==="EAGER"}var Us=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new tc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var JE=[],M=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(M||{}),XE={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},ZE=M.INFO,eI={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},tI=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=eI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Pt=class{constructor(e){this.name=e,this._logLevel=ZE,this._logHandler=tI,this._userLogHandler=null,JE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...e),this._logHandler(this,M.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...e),this._logHandler(this,M.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,M.INFO,...e),this._logHandler(this,M.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,M.WARN,...e),this._logHandler(this,M.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...e),this._logHandler(this,M.ERROR,...e)}};var nI=(t,e)=>e.some(n=>t instanceof n),zp,qp;function rI(){return zp||(zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iI(){return qp||(qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Gp=new WeakMap,rc=new WeakMap,Hp=new WeakMap,nc=new WeakMap,sc=new WeakMap;function sI(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qe(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gp.set(n,t)}).catch(()=>{}),sc.set(e,t),e}function oI(t){if(rc.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rc.set(t,e)}var ic={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qe(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wp(t){ic=t(ic)}function aI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Bs(this),e,...n);return Hp.set(r,e.sort?e.sort():[e]),Qe(r)}:iI().includes(t)?function(...e){return t.apply(Bs(this),e),Qe(Gp.get(this))}:function(...e){return Qe(t.apply(Bs(this),e))}}function uI(t){return typeof t=="function"?aI(t):(t instanceof IDBTransaction&&oI(t),nI(t,rI())?new Proxy(t,ic):t)}function Qe(t){if(t instanceof IDBRequest)return sI(t);if(nc.has(t))return nc.get(t);let e=uI(t);return e!==t&&(nc.set(t,e),sc.set(e,t)),e}var Bs=t=>sc.get(t);function Qp(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Qe(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Qe(o.result),u.oldVersion,u.newVersion,Qe(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var cI=["get","getKey","getAll","getAllKeys","count"],lI=["put","add","delete","clear"],oc=new Map;function Kp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oc.get(e))return oc.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=lI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cI.includes(n)))return;let s=function(o,...a){return d(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),c=u.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&u.done]))[0]})};return oc.set(e,s),s}Wp(t=>oe(D({},t),{get:(e,n,r)=>Kp(e,n)||t.get(e,n,r),has:(e,n)=>!!Kp(e,n)||t.has(e,n)}));var uc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hI(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function hI(t){let e=t.getComponent();return e?.type==="VERSION"}var cc="@firebase/app",Yp="0.10.1";var sn=new Pt("@firebase/app"),dI="@firebase/app-compat",fI="@firebase/analytics-compat",pI="@firebase/analytics",gI="@firebase/app-check-compat",mI="@firebase/app-check",yI="@firebase/auth",vI="@firebase/auth-compat",_I="@firebase/database",wI="@firebase/database-compat",EI="@firebase/functions",II="@firebase/functions-compat",TI="@firebase/installations",DI="@firebase/installations-compat",AI="@firebase/messaging",SI="@firebase/messaging-compat",CI="@firebase/performance",bI="@firebase/performance-compat",RI="@firebase/remote-config",PI="@firebase/remote-config-compat",NI="@firebase/storage",kI="@firebase/storage-compat",OI="@firebase/firestore",MI="@firebase/firestore-compat",FI="firebase",xI="10.11.0";var lc="[DEFAULT]",LI={[cc]:"fire-core",[dI]:"fire-core-compat",[pI]:"fire-analytics",[fI]:"fire-analytics-compat",[mI]:"fire-app-check",[gI]:"fire-app-check-compat",[yI]:"fire-auth",[vI]:"fire-auth-compat",[_I]:"fire-rtdb",[wI]:"fire-rtdb-compat",[EI]:"fire-fn",[II]:"fire-fn-compat",[TI]:"fire-iid",[DI]:"fire-iid-compat",[AI]:"fire-fcm",[SI]:"fire-fcm-compat",[CI]:"fire-perf",[bI]:"fire-perf-compat",[RI]:"fire-rc",[PI]:"fire-rc-compat",[NI]:"fire-gcs",[kI]:"fire-gcs-compat",[OI]:"fire-fst",[MI]:"fire-fst-compat","fire-js":"fire-js",[FI]:"fire-js-all"};var ii=new Map,VI=new Map,hc=new Map;function Jp(t,e){try{t.container.addComponent(e)}catch(n){sn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kt(t){let e=t.name;if(hc.has(e))return sn.debug(`There were multiple attempts to register component ${e}.`),!1;hc.set(e,t);for(let n of ii.values())Jp(n,t);for(let n of VI.values())Jp(n,t);return!0}function oi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Be(t){return t.settings!==void 0}var UI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nt=new ft("app","Firebase",UI);var dc=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Le("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nt.create("app-deleted",{appName:this._name})}};var Ot=xI;function gc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:lc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Nt.create("bad-app-name",{appName:String(i)});if(n||(n=Zu()),!n)throw Nt.create("no-options");let s=ii.get(i);if(s){if(nn(n,s.options)&&nn(r,s.config))return s;throw Nt.create("duplicate-app",{appName:i})}let o=new Us(i);for(let u of hc.values())o.addComponent(u);let a=new dc(n,r,o);return ii.set(i,a),a}function Yn(t=lc){let e=ii.get(t);if(!e&&t===lc&&Zu())return gc();if(!e)throw Nt.create("no-app",{appName:t});return e}function $s(){return Array.from(ii.values())}function ie(t,e,n){var r;let i=(r=LI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sn.warn(a.join(" "));return}kt(new Le(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var BI="firebase-heartbeat-database",$I=1,si="firebase-heartbeat-store",ac=null;function tg(){return ac||(ac=Qp(BI,$I,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(si)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nt.create("idb-open",{originalErrorMessage:t.message})})),ac}function jI(t){return d(this,null,function*(){try{let n=(yield tg()).transaction(si),r=yield n.objectStore(si).get(ng(t));return yield n.done,r}catch(e){if(e instanceof be)sn.warn(e.message);else{let n=Nt.create("idb-get",{originalErrorMessage:e?.message});sn.warn(n.message)}}})}function Xp(t,e){return d(this,null,function*(){try{let r=(yield tg()).transaction(si,"readwrite");yield r.objectStore(si).put(e,ng(t)),yield r.done}catch(n){if(n instanceof be)sn.warn(n.message);else{let r=Nt.create("idb-set",{originalErrorMessage:n?.message});sn.warn(r.message)}}})}function ng(t){return`${t.name}!${t.options.appId}`}var zI=1024,qI=30*24*60*60*1e3,fc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new pc(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return d(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=qI}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return d(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Zp(),{heartbeatsToSend:r,unsentEntries:i}=GI(this._heartbeatsCache.heartbeats),s=ni(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Zp(){return new Date().toISOString().substring(0,10)}function GI(t,e=zI){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var pc=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return d(this,null,function*(){return Vs()?Bp().then(()=>!0).catch(()=>!1):!1})}read(){return d(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield jI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Xp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Xp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function eg(t){return ni(JSON.stringify({version:2,heartbeats:t})).length}function HI(t){kt(new Le("platform-logger",e=>new uc(e),"PRIVATE")),kt(new Le("heartbeat",e=>new fc(e),"PRIVATE")),ie(cc,Yp,t),ie(cc,Yp,"esm2017"),ie("fire-js","")}HI("");var WI="firebase",KI="10.11.0";ie(WI,KI,"app");var an=new Or("ANGULARFIRE2_VERSION");function zs(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ai=(t,e)=>{let n=e?[e]:$s(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Xn=class{constructor(){return ai(QI)}},QI="app-check";function Jn(){}var js=class{zone;delegate;constructor(e,n=lf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},mc=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jn,{},Jn,Jn)),n.pipe(ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Zn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new js(Zone.current)),this.insideAngular=n.run(()=>new js(Zone.current,cf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(U(ue))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qs(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function YI(t){return qs().ngZone.runOutsideAngular(()=>t())}function on(t){return qs().ngZone.run(()=>t())}function JI(t){return XI(qs())(t)}function XI(t){return function(n){return n=n.lift(new mc(t.ngZone)),n.pipe(Fa(t.outsideAngular),Ma(t.insideAngular))}}var ZI=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),on(()=>t.apply(void 0,r))},fe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=on(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jn,{},Jn,Jn))),r[s]=ZI(r[s],n));let i=YI(()=>t.apply(this,r));if(!e)if(i instanceof Rr){let s=qs();return i.pipe(Fa(s.outsideAngular),Ma(s.insideAngular))}else return on(()=>i);return i instanceof Rr?i.pipe(JI):i instanceof Promise?on(()=>new Promise((s,o)=>i.then(a=>on(()=>s(a)),a=>on(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:on(()=>i)};var pt=class{constructor(e){return e}},un=class{constructor(){return $s()}};function e0(t){return t&&t.length===1?t[0]:new pt(Yn())}var yc=new X("angularfire2._apps"),t0={provide:pt,useFactory:e0,deps:[[new De,yc]]},n0={provide:un,deps:[[new De,yc]]};function r0(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new pt(r)}}var i0=(()=>{class t{constructor(n){ie("angularfire",an.full,"core"),ie("angularfire",an.full,"app"),ie("angular",bf.full,n.toString())}static \u0275fac=function(r){return new(r||t)(U(St))};static \u0275mod=ht({type:t});static \u0275inj=lt({providers:[t0,n0]})}return t})();function lP(t,...e){return{ngModule:i0,providers:[{provide:yc,useFactory:r0(t),multi:!0,deps:[ue,dt,Zn,...e]}]}}var hP=fe(gc,!0);function _g(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wg=_g,Eg=new ft("auth","Firebase",_g());var Ys=new Pt("@firebase/auth");function s0(t,...e){Ys.logLevel<=M.WARN&&Ys.warn(`Auth (${Ot}): ${t}`,...e)}function Hs(t,...e){Ys.logLevel<=M.ERROR&&Ys.error(`Auth (${Ot}): ${t}`,...e)}function Je(t,...e){throw Bc(t,...e)}function cn(t,...e){return Bc(t,...e)}function Ig(t,e,n){let r=Object.assign(Object.assign({},wg()),{[e]:n});return new ft("auth","Firebase",r).create(e,{appName:t.name})}function yt(t){return Ig(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bc(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Eg.create(t,...e)}function A(t,e,...n){if(!t)throw Bc(e,...n)}function gt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hs(e),new Error(e)}function Ft(t,e){t||gt(e)}function Ec(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function o0(){return rg()==="http:"||rg()==="https:"}function rg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function a0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o0()||xp()||"connection"in navigator)?navigator.onLine:!0}function u0(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ln=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ft(n>e,"Short delay should be less than long delay!"),this.isMobile=Fp()||Lp()}get(){return a0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $c(t,e){Ft(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Js=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var c0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var l0=new ln(3e4,6e4);function xt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Lt(s,o,a,u){return d(this,arguments,function*(t,e,n,r,i={}){return Tg(t,i,()=>d(this,null,function*(){let c={},l={};r&&(e==="GET"?l=r:c={body:JSON.stringify(r)});let h=ri(Object.assign({key:t.config.apiKey},l)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Js.fetch()(Dg(t,t.config.apiHost,n,h),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},c))}))})}function Tg(t,e,n){return d(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},c0),e);try{let i=new Ic(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Gs(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gs(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gs(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gs(t,"user-disabled",o);let l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ig(t,l,c);Je(t,l)}}catch(i){if(i instanceof be)throw i;Je(t,"network-request-failed",{message:String(i)})}})}function gi(s,o,a,u){return d(this,arguments,function*(t,e,n,r,i={}){let c=yield Lt(t,e,n,r,i);return"mfaPendingCredential"in c&&Je(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function Dg(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?$c(t.config,i):`${t.config.apiScheme}://${i}`}function h0(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ic=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),l0.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Gs(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=cn(t,e,r);return i.customData._tokenResponse=n,i}function ig(t){return t!==void 0&&t.enterprise!==void 0}var Tc=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return h0(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function d0(t,e){return d(this,null,function*(){return Lt(t,"GET","/v2/recaptchaConfig",xt(t,e))})}function f0(t,e){return d(this,null,function*(){return Lt(t,"POST","/v1/accounts:delete",e)})}function Ag(t,e){return d(this,null,function*(){return Lt(t,"POST","/v1/accounts:lookup",e)})}function ui(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jc(t,e=!1){return d(this,null,function*(){let n=Z(t),r=yield n.getIdToken(e),i=zc(r);A(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ui(vc(i.auth_time)),issuedAtTime:ui(vc(i.iat)),expirationTime:ui(vc(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function vc(t){return Number(t)*1e3}function zc(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hs("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ju(n);return i?JSON.parse(i):(Hs("Failed to decode base64 JWT payload"),null)}catch(i){return Hs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sg(t){let e=zc(t);return A(e,"internal-error"),A(typeof e.exp<"u","internal-error"),A(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function li(t,e,n=!1){return d(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof be&&p0(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function p0({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Dc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>d(this,null,function*(){yield this.iteration()}),n)}iteration(){return d(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hi=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ui(this.lastLoginAt),this.creationTime=ui(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xs(t){return d(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield li(t,Ag(n,{idToken:r}));A(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Sg(s.providerUserInfo):[],a=g0(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!a?.length,l=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hi(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,h)})}function qc(t){return d(this,null,function*(){let e=Z(t);yield Xs(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function g0(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Sg(t){return t.map(e=>{var{providerId:n}=e,r=Oa(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function m0(t,e){return d(this,null,function*(){let n=yield Tg(t,{},()=>d(this,null,function*(){let r=ri({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Dg(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Js.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function y0(t,e){return d(this,null,function*(){return Lt(t,"POST","/v2/accounts:revokeToken",xt(t,e))})}var ci=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,"internal-error"),A(typeof e.idToken<"u","internal-error"),A(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){A(e.length!==0,"internal-error");let n=sg(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return d(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(A(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return d(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield m0(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(A(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(A(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(A(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return gt("not implemented")}};function Mt(t,e){A(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var er=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Oa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return d(this,null,function*(){let n=yield li(this,this.stsTokenManager.getToken(this.auth,e));return A(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return jc(this,e)}reload(){return qc(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return d(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Xs(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return d(this,null,function*(){if(Be(this.auth.app))return Promise.reject(yt(this.auth));let e=yield this.getIdToken();return yield li(this,f0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(c=n.createdAt)!==null&&c!==void 0?c:void 0,z=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:J,emailVerified:ye,isAnonymous:Ge,providerData:se,stsTokenManager:ct}=n;A(J&&ct,e,"internal-error");let On=ci.fromJSON(this.name,ct);A(typeof J=="string",e,"internal-error"),Mt(h,e.name),Mt(f,e.name),A(typeof ye=="boolean",e,"internal-error"),A(typeof Ge=="boolean",e,"internal-error"),Mt(p,e.name),Mt(E,e.name),Mt(I,e.name),Mt(w,e.name),Mt(O,e.name),Mt(z,e.name);let br=new t({uid:J,auth:e,email:f,emailVerified:ye,displayName:h,isAnonymous:Ge,photoURL:E,phoneNumber:p,tenantId:I,stsTokenManager:On,createdAt:O,lastLoginAt:z});return se&&Array.isArray(se)&&(br.providerData=se.map(hs=>Object.assign({},hs))),w&&(br._redirectEventId=w),br}static _fromIdTokenResponse(e,n,r=!1){return d(this,null,function*(){let i=new ci;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Xs(s),s})}static _fromGetAccountInfoResponse(e,n,r){return d(this,null,function*(){let i=n.users[0];A(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Sg(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ci;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,c),u})}};var og=new Map;function mt(t){Ft(t instanceof Function,"Expected a class definition");let e=og.get(t);return e?(Ft(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,og.set(t,e),e)}var v0=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return d(this,null,function*(){return!0})}_set(n,r){return d(this,null,function*(){this.storage[n]=r})}_get(n){return d(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return d(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ac=v0;function Ws(t,e,n){return`firebase:${t}:${e}:${n}`}var Zs=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ws(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ws("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return d(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?er._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return d(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return d(this,null,function*(){if(!n.length)return new t(mt(Ac),e,r);let i=(yield Promise.all(n.map(c=>d(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),s=i[0]||mt(Ac),o=Ws(r,e.config.apiKey,e.name),a=null;for(let c of n)try{let l=yield c._get(o);if(l){let h=er._fromJSON(e,l);c!==s&&(a=h),s=c;break}}catch{}let u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(c=>d(this,null,function*(){if(c!==s)try{yield c._remove(o)}catch{}}))),new t(s,e,r))})}};function ag(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ng(e))return"Blackberry";if(kg(e))return"Webos";if(Gc(e))return"Safari";if((e.includes("chrome/")||bg(e))&&!e.includes("edge/"))return"Chrome";if(Pg(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Cg(t=W()){return/firefox\//i.test(t)}function Gc(t=W()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bg(t=W()){return/crios\//i.test(t)}function Rg(t=W()){return/iemobile/i.test(t)}function Pg(t=W()){return/android/i.test(t)}function Ng(t=W()){return/blackberry/i.test(t)}function kg(t=W()){return/webos/i.test(t)}function ao(t=W()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _0(t=W()){var e;return ao(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function w0(){return Vp()&&document.documentMode===10}function Og(t=W()){return ao(t)||Pg(t)||kg(t)||Ng(t)||/windows phone/i.test(t)||Rg(t)}function E0(){try{return!!(window&&window!==window.top)}catch{return!1}}function Mg(t,e=[]){let n;switch(t){case"Browser":n=ag(W());break;case"Worker":n=`${ag(W())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ot}/${r}`}var Sc=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return d(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function I0(n){return d(this,arguments,function*(t,e={}){return Lt(t,"GET","/v2/passwordPolicy",xt(t,e))})}var T0=6,Cc=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:T0,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var bc=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eo(this),this.idTokenSubscription=new eo(this),this.beforeStateQueue=new Sc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mt(n)),this._initializationPromise=this.queue(()=>d(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Zs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return d(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return d(this,null,function*(){try{let n=yield Ag(this,{idToken:e}),r=yield er._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return d(this,null,function*(){var n;if(Be(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return A(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return d(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return d(this,null,function*(){try{yield Xs(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=u0()}_delete(){return d(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return d(this,null,function*(){if(Be(this.app))return Promise.reject(yt(this));let n=e?Z(e):null;return n&&A(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return d(this,null,function*(){if(!this._deleted)return e&&A(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>d(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return d(this,null,function*(){return Be(this.app)?Promise.reject(yt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Be(this.app)?Promise.reject(yt(this)):this.queue(()=>d(this,null,function*(){yield this.assertedPersistence.setPersistence(mt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return d(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return d(this,null,function*(){let e=yield I0(this),n=new Cc(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ft("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return d(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield y0(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return d(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return d(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&mt(e)||this._popupRedirectResolver;A(n,this,"argument-error"),this.redirectPersistenceManager=yield Zs.create(this,[mt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return d(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>d(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return d(this,null,function*(){if(e===this.currentUser)return this.queue(()=>d(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(A(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return d(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return d(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return d(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&s0(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function dn(t){return Z(t)}var eo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=jp(n=>this.observer=n)}get next(){return A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uo={loadJS(){return d(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function D0(t){uo=t}function Fg(t){return uo.loadJS(t)}function A0(){return uo.recaptchaEnterpriseScript}function S0(){return uo.gapiScript}function xg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var C0="recaptcha-enterprise",b0="NO_RECAPTCHA",Rc=class{constructor(e){this.type=C0,this.auth=dn(e)}verify(e="verify",n=!1){return d(this,null,function*(){function r(s){return d(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>d(this,null,function*(){d0(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let c=new Tc(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;ig(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(b0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&ig(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=A0();u.length!==0&&(u+=a),Fg(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function ug(t,e,n,r=!1){return d(this,null,function*(){let i=new Rc(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Pc(t,e,n,r){return d(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield ug(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>d(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield ug(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Hc(t,e){let n=oi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(nn(s,e??{}))return i;Je(i,"already-initialized")}return n.initialize({options:e})}function R0(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(mt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Wc(t,e,n){let r=dn(t);A(r._canInitEmulator,r,"emulator-config-failed"),A(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=Lg(e),{host:o,port:a}=P0(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||N0()}function Lg(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P0(t){let e=Lg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:cg(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:cg(o)}}}function cg(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function N0(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var di=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gt("not implemented")}_getIdTokenResponse(e){return gt("not implemented")}_linkToIdToken(e,n){return gt("not implemented")}_getReauthenticationResolver(e){return gt("not implemented")}};function k0(t,e){return d(this,null,function*(){return Lt(t,"POST","/v1/accounts:signUp",e)})}function O0(t,e){return d(this,null,function*(){return gi(t,"POST","/v1/accounts:signInWithPassword",xt(t,e))})}function M0(t,e){return d(this,null,function*(){return gi(t,"POST","/v1/accounts:signInWithEmailLink",xt(t,e))})}function F0(t,e){return d(this,null,function*(){return gi(t,"POST","/v1/accounts:signInWithEmailLink",xt(t,e))})}var fi=class t extends di{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return d(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pc(e,n,"signInWithPassword",O0);case"emailLink":return M0(e,{email:this._email,oobCode:this._password});default:Je(e,"internal-error")}})}_linkToIdToken(e,n){return d(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pc(e,r,"signUpPassword",k0);case"emailLink":return F0(e,{idToken:n,email:this._email,oobCode:this._password});default:Je(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function _c(t,e){return d(this,null,function*(){return gi(t,"POST","/v1/accounts:signInWithIdp",xt(t,e))})}function x0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L0(t){let e=Kn(Qn(t)).link,n=e?Kn(Qn(e)).deep_link_id:null,r=Kn(Qn(t)).deep_link_id;return(r?Kn(Qn(r)).link:null)||r||n||e||t}var to=class t{constructor(e){var n,r,i,s,o,a;let u=Kn(Qn(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,l=(r=u.oobCode)!==null&&r!==void 0?r:null,h=x0((i=u.mode)!==null&&i!==void 0?i:null);A(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=L0(e);try{return new t(n)}catch{return null}}};var Vg=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return fi._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=to.parseLink(r);return A(i,"argument-error"),fi._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),no=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Nc=class extends no{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function V0(t,e){return d(this,null,function*(){return gi(t,"POST","/v1/accounts:signUp",xt(t,e))})}var tr=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return d(this,null,function*(){let s=yield er._fromIdTokenResponse(e,r,i),o=lg(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return d(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=lg(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function lg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var kc=class t extends be{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Ug(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(t,s,e,r):s})}function U0(t,e,n=!1){return d(this,null,function*(){let r=yield li(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return tr._forOperation(t,"link",r)})}function B0(t,e,n=!1){return d(this,null,function*(){let{auth:r}=t;if(Be(r.app))return Promise.reject(yt(r));let i="reauthenticate";try{let s=yield li(t,Ug(r,i,e,t),n);A(s.idToken,r,"internal-error");let o=zc(s.idToken);A(o,r,"internal-error");let{sub:a}=o;return A(t.uid===a,r,"user-mismatch"),tr._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Je(r,"user-mismatch"),s}})}function Bg(t,e,n=!1){return d(this,null,function*(){if(Be(t.app))return Promise.reject(yt(t));let r="signIn",i=yield Ug(t,r,e),s=yield tr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Kc(t,e){return d(this,null,function*(){return Bg(dn(t),e)})}function $g(t){return d(this,null,function*(){let e=dn(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Qc(t,e,n){return d(this,null,function*(){if(Be(t.app))return Promise.reject(yt(t));let r=dn(t),o=yield Pc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",V0).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$g(t),u}),a=yield tr._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Yc(t,e,n){return Be(t.app)?Promise.reject(yt(t)):Kc(Z(t),Vg.credential(e,n)).catch(r=>d(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&$g(t),r}))}function Jc(t,e,n,r){return Z(t).onIdTokenChanged(e,n,r)}function Xc(t,e,n){return Z(t).beforeAuthStateChanged(e,n)}function Zc(t){return Z(t).signOut()}var ro="__sak";var io=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function $0(){let t=W();return Gc(t)||ao(t)}var j0=1e3,z0=10,q0=(()=>{class t extends io{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=$0()&&E0(),this.fallbackToPolling=Og(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);w0()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,z0):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},j0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return d(this,null,function*(){yield Tt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return d(this,null,function*(){let r=yield Tt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return d(this,null,function*(){yield Tt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),jg=q0;var G0=(()=>{class t extends io{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),el=G0;function H0(t){return Promise.all(t.map(e=>d(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var W0=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return d(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(l=>d(this,null,function*(){return l(r.origin,o)})),c=yield H0(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function zg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Oc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return d(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let c=zg("",20);i.port1.start();let l=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ye(){return window}function K0(t){Ye().location.href=t}function qg(){return typeof Ye().WorkerGlobalScope<"u"&&typeof Ye().importScripts=="function"}function Q0(){return d(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Y0(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function J0(){return qg()?self:null}var Gg="firebaseLocalStorageDb",X0=1,so="firebaseLocalStorage",Hg="fbase_key",hn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function co(t,e){return t.transaction([so],e?"readwrite":"readonly").objectStore(so)}function Z0(){let t=indexedDB.deleteDatabase(Gg);return new hn(t).toPromise()}function Mc(){let t=indexedDB.open(Gg,X0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(so,{keyPath:Hg})}catch(i){n(i)}}),t.addEventListener("success",()=>d(this,null,function*(){let r=t.result;r.objectStoreNames.contains(so)?e(r):(r.close(),yield Z0(),e(yield Mc()))}))})}function hg(t,e,n){return d(this,null,function*(){let r=co(t,!0).put({[Hg]:e,value:n});return new hn(r).toPromise()})}function eT(t,e){return d(this,null,function*(){let n=co(t,!1).get(e),r=yield new hn(n).toPromise();return r===void 0?null:r.value})}function dg(t,e){let n=co(t,!0).delete(e);return new hn(n).toPromise()}var tT=800,nT=3,rT=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return d(this,null,function*(){return this.db?this.db:(this.db=yield Mc(),this.db)})}_withRetries(n){return d(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>nT)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return d(this,null,function*(){return qg()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return d(this,null,function*(){this.receiver=W0._getInstance(J0()),this.receiver._subscribe("keyChanged",(n,r)=>d(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>d(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return d(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Q0(),!this.activeServiceWorker)return;this.sender=new Oc(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return d(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Y0()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return d(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Mc();return yield hg(n,ro,"1"),yield dg(n,ro),!0}catch{}return!1})}_withPendingWrite(n){return d(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(i=>hg(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return d(this,null,function*(){let r=yield this._withRetries(i=>eT(i,n));return this.localCache[n]=r,r})}_remove(n){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(r=>dg(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return d(this,null,function*(){let n=yield this._withRetries(s=>{let o=co(s,!1).getAll();return new hn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>d(this,null,function*(){return this._poll()}),tT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Wg=rT;var _P=xg("rcb"),wP=new ln(3e4,6e4);function iT(t,e){return e?mt(e):(A(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pi=class extends di{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _c(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function sT(t){return Bg(t.auth,new pi(t),t.bypassAuthState)}function oT(t){let{auth:e,user:n}=t;return A(n,e,"internal-error"),B0(n,new pi(t),t.bypassAuthState)}function aT(t){return d(this,null,function*(){let{auth:e,user:n}=t;return A(n,e,"internal-error"),U0(n,new pi(t),t.bypassAuthState)})}var Fc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>d(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return d(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sT;case"linkViaPopup":case"linkViaRedirect":return aT;case"reauthViaPopup":case"reauthViaRedirect":return oT;default:Je(this.auth,"internal-error")}}resolve(e){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var EP=new ln(2e3,1e4);var uT="pendingRedirect",Ks=new Map,xc=class t extends Fc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return d(this,null,function*(){let e=Ks.get(this.auth._key());if(!e){try{let r=(yield cT(this.resolver,this.auth))?yield Tt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ks.set(this.auth._key(),e)}return this.bypassAuthState||Ks.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return d(this,null,function*(){if(e.type==="signInViaRedirect")return Tt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Tt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return d(this,null,function*(){})}cleanUp(){}};function cT(t,e){return d(this,null,function*(){let n=dT(e),r=hT(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function lT(t,e){Ks.set(t._key(),e)}function hT(t){return mt(t._redirectPersistence)}function dT(t){return Ws(uT,t.config.apiKey,t.name)}function fT(t,e,n=!1){return d(this,null,function*(){if(Be(t.app))return Promise.reject(yt(t));let r=dn(t),i=iT(r,e),o=yield new xc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var pT=10*60*1e3,Lc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kg(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pT&&this.cachedEventUids.clear(),this.cachedEventUids.has(fg(e))}saveEventToCache(e){this.cachedEventUids.add(fg(e)),this.lastProcessedEventTime=Date.now()}};function fg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kg(t);default:return!1}}function mT(n){return d(this,arguments,function*(t,e={}){return Lt(t,"GET","/v1/projects",e)})}var yT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vT=/^https?/;function _T(t){return d(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield mT(t);for(let n of e)try{if(wT(n))return}catch{}Je(t,"unauthorized-domain")})}function wT(t){let e=Ec(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vT.test(n))return!1;if(yT.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ET=new ln(3e4,6e4);function pg(){let t=Ye().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IT(t){return new Promise((e,n)=>{var r,i,s;function o(){pg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pg(),n(cn(t,"network-request-failed"))},timeout:ET.get()})}if(!((i=(r=Ye().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ye().gapi)===null||s===void 0)&&s.load)o();else{let a=xg("iframefcb");return Ye()[a]=()=>{gapi.load?o():n(cn(t,"network-request-failed"))},Fg(`${S0()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Qs=null,e})}var Qs=null;function TT(t){return Qs=Qs||IT(t),Qs}var DT=new ln(5e3,15e3),AT="__/auth/iframe",ST="emulator/auth/iframe",CT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RT(t){let e=t.config;A(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?$c(e,ST):`https://${t.config.authDomain}/${AT}`,r={apiKey:e.apiKey,appName:t.name,v:Ot},i=bT.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ri(r).slice(1)}`}function PT(t){return d(this,null,function*(){let e=yield TT(t),n=Ye().gapi;return A(n,t,"internal-error"),e.open({where:document.body,url:RT(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CT,dontclear:!0},r=>new Promise((i,s)=>d(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=cn(t,"network-request-failed"),a=Ye().setTimeout(()=>{s(o)},DT.get());function u(){Ye().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var NT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kT=500,OT=600,MT="_blank",FT="http://localhost",oo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xT(t,e,n,r=kT,i=OT){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},NT),{width:r.toString(),height:i.toString(),top:s,left:o}),c=W().toLowerCase();n&&(a=bg(c)?MT:n),Cg(c)&&(e=e||FT,u.scrollbars="yes");let l=Object.entries(u).reduce((f,[p,E])=>`${f}${p}=${E},`,"");if(_0(c)&&a!=="_self")return LT(e||"",a),new oo(null);let h=window.open(e||"",a,l);A(h,t,"popup-blocked");try{h.focus()}catch{}return new oo(h)}function LT(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var VT="__/auth/handler",UT="emulator/auth/handler",BT=encodeURIComponent("fac");function gg(t,e,n,r,i,s){return d(this,null,function*(){A(t.config.authDomain,t,"auth-domain-config-required"),A(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ot,eventId:i};if(e instanceof no){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$p(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,h]of Object.entries(s||{}))o[l]=h}if(e instanceof Nc){let l=e.getScopes().filter(h=>h!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let u=yield t._getAppCheckToken(),c=u?`#${BT}=${encodeURIComponent(u)}`:"";return`${$T(t)}?${ri(a).slice(1)}${c}`})}function $T({config:t}){return t.emulator?$c(t,UT):`https://${t.authDomain}/${VT}`}var wc="webStorageSupport",Vc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=el,this._completeRedirectFn=fT,this._overrideRedirectResult=lT}_openPopup(e,n,r,i){return d(this,null,function*(){var s;Ft((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield gg(e,n,r,Ec(),i);return xT(e,o,zg())})}_openRedirect(e,n,r,i){return d(this,null,function*(){yield this._originValidation(e);let s=yield gg(e,n,r,Ec(),i);return K0(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ft(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return d(this,null,function*(){let n=yield PT(e),r=new Lc(e);return n.register("authEvent",i=>(A(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wc,{type:wc},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[wc];o!==void 0&&n(!!o),Je(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_T(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Og()||Gc()||ao()}},Qg=Vc;var mg="@firebase/auth",yg="1.7.1";var Uc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return d(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function jT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zT(t){kt(new Le("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;A(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mg(t)},c=new bc(r,i,s,u);return R0(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kt(new Le("auth-internal",e=>{let n=dn(e.getProvider("auth").getImmediate());return(r=>new Uc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ie(mg,yg,jT(t)),ie(mg,yg,"esm2017")}var qT=5*60,GT=ec("authIdTokenMaxAge")||qT,vg=null,HT=t=>e=>d(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GT)return;let i=n?.token;vg!==i&&(vg=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tl(t=Yn()){let e=oi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Hc(t,{popupRedirectResolver:Qg,persistence:[Wg,jg,el]}),r=ec("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=HT(s.toString());Xc(n,o,()=>o(n.currentUser)),Jc(n,a=>o(a))}}let i=Xu("auth");return i&&Wc(n,`http://${i}`),n}function WT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}D0({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=cn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",WT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zT("Browser");var Yg="auth",mi=class{constructor(e){return e}},yi=class{constructor(){return ai(Yg)}};var nl=new X("angularfire2.auth-instances");function LD(t,e){let n=zs(Yg,t,e);return n&&new mi(n)}function VD(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new mi(r)}}var UD={provide:yi,deps:[[new De,nl]]},BD={provide:mi,useFactory:LD,deps:[[new De,nl],pt]},$D=(()=>{class t{constructor(){ie("angularfire",an.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ht({type:t});static \u0275inj=lt({providers:[BD,UD]})}return t})();function iN(t,...e){return{ngModule:$D,providers:[{provide:nl,useFactory:VD(t),multi:!0,deps:[ue,dt,Zn,un,[new De,Xn],...e]}]}}var sN=fe(Qc,!0);var oN=fe(tl,!0);var aN=fe(Yc,!0);var uN=fe(Zc,!0);var jD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={},y,Dl=Dl||{},C=jD||self;function Do(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ni(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function zD(t){return Object.prototype.hasOwnProperty.call(t,rl)&&t[rl]||(t[rl]=++qD)}var rl="closure_uid_"+(1e9*Math.random()>>>0),qD=0;function GD(t,e,n){return t.call.apply(t.bind,arguments)}function HD(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ve(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ve=GD:ve=HD,ve.apply(null,arguments)}function lo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function le(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Vt(){this.s=this.s,this.o=this.o}var WD=0;Vt.prototype.s=!1;Vt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),WD!=0)&&zD(this)};Vt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cm=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Al(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jg(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Do(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function _e(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var KD=function(){if(!C.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};C.addEventListener("test",n,e),C.removeEventListener("test",n,e)}catch{}return t}();function Ti(t){return/^[\s\xa0]*$/.test(t)}function Ao(){var t=C.navigator;return t&&(t=t.userAgent)?t:""}function Xe(t){return Ao().indexOf(t)!=-1}function Sl(t){return Sl[" "](t),t}Sl[" "]=function(){};function QD(t,e){var n=LA;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var YD=Xe("Opera"),sr=Xe("Trident")||Xe("MSIE"),lm=Xe("Edge"),ul=lm||sr,hm=Xe("Gecko")&&!(Ao().toLowerCase().indexOf("webkit")!=-1&&!Xe("Edge"))&&!(Xe("Trident")||Xe("MSIE"))&&!Xe("Edge"),JD=Ao().toLowerCase().indexOf("webkit")!=-1&&!Xe("Edge");function dm(){var t=C.document;return t?t.documentMode:void 0}var cl;e:{if(ho="",fo=function(){var t=Ao();if(hm)return/rv:([^\);]+)(\)|;)/.exec(t);if(lm)return/Edge\/([\d\.]+)/.exec(t);if(sr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(JD)return/WebKit\/(\S+)/.exec(t);if(YD)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),fo&&(ho=fo?fo[1]:""),sr&&(po=dm(),po!=null&&po>parseFloat(ho))){cl=String(po);break e}cl=ho}var ho,fo,po,ll;C.document&&sr?(il=dm(),ll=il||parseInt(cl,10)||void 0):ll=void 0;var il,XD=ll;function Di(t,e){if(_e.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hm){e:{try{Sl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ZD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Di.$.h.call(this)}}le(Di,_e);var ZD={2:"touch",3:"pen",4:"mouse"};Di.prototype.h=function(){Di.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ki="closure_listenable_"+(1e6*Math.random()|0),eA=0;function tA(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++eA,this.fa=this.ia=!1}function So(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Cl(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function nA(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function fm(t){let e={};for(let n in t)e[n]=t[n];return e}var Xg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pm(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Xg.length;s++)n=Xg[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Co(t){this.src=t,this.g={},this.h=0}Co.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=dl(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new tA(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function hl(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=cm(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(So(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dl(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var bl="closure_lm_"+(1e6*Math.random()|0),sl={};function gm(t,e,n,r,i){if(r&&r.once)return ym(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)gm(t,e[s],n,r,i);return null}return n=Nl(n),t&&t[ki]?t.O(e,n,Ni(r)?!!r.capture:!!r,i):mm(t,e,n,!1,r,i)}function mm(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ni(i)?!!i.capture:!!i,a=Pl(t);if(a||(t[bl]=a=new Co(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=rA(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)KD||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_m(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function rA(){function t(n){return e.call(t.src,t.listener,n)}let e=iA;return t}function ym(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ym(t,e[s],n,r,i);return null}return n=Nl(n),t&&t[ki]?t.P(e,n,Ni(r)?!!r.capture:!!r,i):mm(t,e,n,!0,r,i)}function vm(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)vm(t,e[s],n,r,i);else r=Ni(r)?!!r.capture:!!r,n=Nl(n),t&&t[ki]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=dl(s,n,r,i),-1<n&&(So(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Pl(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dl(e,n,r,i)),(n=-1<t?e[t]:null)&&Rl(n))}function Rl(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ki])hl(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_m(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Pl(e))?(hl(n,t),n.h==0&&(n.src=null,e[bl]=null)):So(t)}}}function _m(t){return t in sl?sl[t]:sl[t]="on"+t}function iA(t,e){if(t.fa)t=!0;else{e=new Di(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Rl(t),t=n.call(r,e)}return t}function Pl(t){return t=t[bl],t instanceof Co?t:null}var ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nl(t){return typeof t=="function"?t:(t[ol]||(t[ol]=function(e){return t.handleEvent(e)}),t[ol])}function ce(){Vt.call(this),this.i=new Co(this),this.S=this,this.J=null}le(ce,Vt);ce.prototype[ki]=!0;ce.prototype.removeEventListener=function(t,e,n,r){vm(this,t,e,n,r)};function ge(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new _e(e,t);else if(e instanceof _e)e.target=e.target||t;else{var i=e;e=new _e(r,t),pm(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=go(o,r,!0,e)&&i}if(o=e.g=t,i=go(o,r,!0,e)&&i,i=go(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=go(o,r,!1,e)&&i}ce.prototype.N=function(){if(ce.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)So(n[r]);delete t.g[e],t.h--}}this.J=null};ce.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ce.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function go(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&hl(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var kl=C.JSON.stringify,fl=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function sA(){var t=Ol;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var pl=class{constructor(){this.h=this.g=null}add(e,n){let r=wm.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},wm=new fl(()=>new gl,t=>t.reset()),gl=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function oA(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function aA(t){C.setTimeout(()=>{throw t},0)}var Ai,Si=!1,Ol=new pl,Em=()=>{let t=C.Promise.resolve(void 0);Ai=()=>{t.then(uA)}},uA=()=>{for(var t;t=sA();){try{t.h.call(t.g)}catch(n){aA(n)}var e=wm;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Si=!1};function bo(t,e){ce.call(this),this.h=t||1,this.g=e||C,this.j=ve(this.qb,this),this.l=Date.now()}le(bo,ce);y=bo.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ge(this,"tick"),this.ga&&(Ml(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ml(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){bo.$.N.call(this),Ml(this),delete this.g};function Fl(t,e,n){if(typeof t=="function")n&&(t=ve(t,n));else if(t&&typeof t.handleEvent=="function")t=ve(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:C.setTimeout(t,e||0)}function Im(t){t.g=Fl(()=>{t.g=null,t.i&&(t.i=!1,Im(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var ml=class extends Vt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Im(this)}N(){super.N(),this.g&&(C.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ci(t){Vt.call(this),this.h=t,this.g={}}le(Ci,Vt);var Zg=[];function Tm(t,e,n,r){Array.isArray(n)||(n&&(Zg[0]=n.toString()),n=Zg);for(var i=0;i<n.length;i++){var s=gm(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Dm(t){Cl(t.g,function(e,n){this.g.hasOwnProperty(n)&&Rl(e)},t),t.g={}}Ci.prototype.N=function(){Ci.$.N.call(this),Dm(this)};Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ro(){this.g=!0}Ro.prototype.Ea=function(){this.g=!1};function cA(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function lA(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function rr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+dA(t,n)+(r?" "+r:"")})}function hA(t,e){t.info(function(){return"TIMEOUT: "+e})}Ro.prototype.info=function(){};function dA(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return kl(n)}catch{return e}}var mn={},em=null;function Po(){return em=em||new ce}mn.Ta="serverreachability";function Am(t){_e.call(this,mn.Ta,t)}le(Am,_e);function bi(t){let e=Po();ge(e,new Am(e))}mn.STAT_EVENT="statevent";function Sm(t,e){_e.call(this,mn.STAT_EVENT,t),this.stat=e}le(Sm,_e);function Ie(t){let e=Po();ge(e,new Sm(e,t))}mn.Ua="timingevent";function Cm(t,e){_e.call(this,mn.Ua,t),this.size=e}le(Cm,_e);function Oi(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return C.setTimeout(function(){t()},e)}var No={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},bm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xl(){}xl.prototype.h=null;function tm(t){return t.h||(t.h=t.i())}function Rm(){}var Mi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ll(){_e.call(this,"d")}le(Ll,_e);function Vl(){_e.call(this,"c")}le(Vl,_e);var yl;function ko(){}le(ko,xl);ko.prototype.g=function(){return new XMLHttpRequest};ko.prototype.i=function(){return{}};yl=new ko;function Fi(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ci(this),this.P=fA,t=ul?125:void 0,this.V=new bo(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Pm}function Pm(){this.i=null,this.g="",this.h=!1}var fA=45e3,Nm={},vl={};y=Fi.prototype;y.setTimeout=function(t){this.P=t};function _l(t,e,n){t.L=1,t.A=Mo(_t(e)),t.u=n,t.S=!0,km(t,null)}function km(t,e){t.G=Date.now(),xi(t),t.B=_t(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Bm(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Pm,t.g=ay(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ml(ve(t.Pa,t,t.g),t.O)),Tm(t.U,t.g,"readystatechange",t.nb),e=t.I?fm(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),bi(),cA(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&Ze(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=Ze(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>l)&&(l!=3||ul||this.g&&(this.h.h||this.g.ja()||sm(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?bi(3):bi(2)),Oo(this);var n=this.g.da();this.ca=n;t:if(Om(this)){var r=sm(this.g);t="";var i=r.length,s=Ze(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Ii(this);var o="";break t}this.h.i=new C.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,lA(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ti(a)){var c=a;break t}}c=null}if(n=c)rr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wl(this,n);else{this.i=!1,this.s=3,Ie(12),fn(this),Ii(this);break e}}this.S?(Mm(this,l,o),ul&&this.i&&l==3&&(Tm(this.U,this.V,"tick",this.mb),this.V.start())):(rr(this.j,this.m,o,null),wl(this,o)),l==4&&fn(this),this.i&&!this.J&&(l==4?ry(this.l,this):(this.i=!1,xi(this)))}else MA(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),fn(this),Ii(this)}}}catch{}finally{}};function Om(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Mm(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=pA(t,n),i==vl){e==4&&(t.s=4,Ie(14),r=!1),rr(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Nm){t.s=4,Ie(15),rr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else rr(t.j,t.m,i,null),wl(t,i);Om(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Ie(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ql(e),e.M=!0,Ie(11))):(rr(t.j,t.m,n,"[Invalid Chunked Response]"),fn(t),Ii(t))}y.mb=function(){if(this.g){var t=Ze(this.g),e=this.g.ja();this.o<e.length&&(Oo(this),Mm(this,t,e),this.i&&t!=4&&xi(this))}};function pA(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?vl:(n=Number(e.substring(n,r)),isNaN(n)?Nm:(r+=1,r+n>e.length?vl:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,fn(this)};function xi(t){t.Y=Date.now()+t.P,Fm(t,t.P)}function Fm(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Oi(ve(t.lb,t),e)}function Oo(t){t.C&&(C.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(hA(this.j,this.B),this.L!=2&&(bi(),Ie(17)),fn(this),this.s=2,Ii(this)):Fm(this,this.Y-t)};function Ii(t){t.l.H==0||t.J||ry(t.l,t)}function fn(t){Oo(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Ml(t.V),Dm(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function wl(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||El(n.i,t))){if(!t.K&&El(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)wo(n),Lo(n);else break e;zl(n),Ie(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Oi(ve(n.ib,n),6e3));if(1>=zm(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else pn(n,11)}else if((t.K||n.g==t)&&wo(n),!Ti(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let E=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ul(s,s.h),s.h=null))}if(r.F){let I=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,G(r.I,r.F,I))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=oy(r,r.J?r.pa:null,r.Y),o.K){qm(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(Oo(a),xi(a)),r.g=o}else ty(r);0<n.j.length&&Vo(n)}else c[0]!="stop"&&c[0]!="close"||pn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?pn(n,7):jl(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}bi(4)}catch{}}function gA(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Do(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function mA(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Do(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function xm(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Do(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=mA(t),r=gA(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Lm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yA(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function gn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gn){this.h=t.h,vo(this,t.j),this.s=t.s,this.g=t.g,_o(this,t.m),this.l=t.l;var e=t.i,n=new Ri;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),nm(this,n),this.o=t.o}else t&&(e=String(t).match(Lm))?(this.h=!1,vo(this,e[1]||"",!0),this.s=wi(e[2]||""),this.g=wi(e[3]||"",!0),_o(this,e[4]),this.l=wi(e[5]||"",!0),nm(this,e[6]||"",!0),this.o=wi(e[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}gn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ei(e,rm,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ei(e,rm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ei(n,n.charAt(0)=="/"?wA:_A,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ei(n,IA)),t.join("")};function _t(t){return new gn(t)}function vo(t,e,n){t.j=n?wi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _o(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function nm(t,e,n){e instanceof Ri?(t.i=e,TA(t.i,t.h)):(n||(e=Ei(e,EA)),t.i=new Ri(e,t.h))}function G(t,e,n){t.i.set(e,n)}function Mo(t){return G(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function wi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ei(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,vA),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vA(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var rm=/[#\/\?@]/g,_A=/[#\?:]/g,wA=/[#\?]/g,EA=/[#\?@]/g,IA=/#/g;function Ri(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ut(t){t.g||(t.g=new Map,t.h=0,t.i&&yA(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=Ri.prototype;y.add=function(t,e){Ut(this),this.i=null,t=or(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Vm(t,e){Ut(t),e=or(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Um(t,e){return Ut(t),e=or(t,e),t.g.has(e)}y.forEach=function(t,e){Ut(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){Ut(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};y.Z=function(t){Ut(this);let e=[];if(typeof t=="string")Um(this,t)&&(e=e.concat(this.g.get(or(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return Ut(this),this.i=null,t=or(this,t),Um(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Bm(t,e,n){Vm(t,e),0<n.length&&(t.i=null,t.g.set(or(t,e),Al(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function or(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function TA(t,e){e&&!t.j&&(Ut(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Vm(this,r),Bm(this,i,n))},t)),t.j=e}var DA=class{constructor(t,e){this.g=t,this.map=e}};function $m(t){this.l=t||AA,C.PerformanceNavigationTiming?(t=C.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(C.g&&C.g.Ka&&C.g.Ka()&&C.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var AA=10;function jm(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function zm(t){return t.h?1:t.g?t.g.size:0}function El(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ul(t,e){t.g?t.g.add(e):t.h=e}function qm(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$m.prototype.cancel=function(){if(this.i=Gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Gm(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Al(t.i)}var SA=class{stringify(t){return C.JSON.stringify(t,void 0)}parse(t){return C.JSON.parse(t,void 0)}};function CA(){this.g=new SA}function bA(t,e,n){let r=n||"";try{xm(t,function(i,s){let o=i;Ni(i)&&(o=kl(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RA(t,e){let n=new Ro;if(C.Image){let r=new Image;r.onload=lo(mo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=lo(mo,n,r,"TestLoadImage: error",!1,e),r.onabort=lo(mo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=lo(mo,n,r,"TestLoadImage: timeout",!1,e),C.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function mo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Li(t){this.l=t.ec||null,this.j=t.ob||!1}le(Li,xl);Li.prototype.g=function(){return new Fo(this.l,this.j)};Li.prototype.i=function(t){return function(){return t}}({});function Fo(t,e){ce.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Bl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}le(Fo,ce);var Bl=0;y=Fo.prototype;y.open=function(t,e){if(this.readyState!=Bl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pi(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||C).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=Bl};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof C.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hm(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Hm(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Vi(this):Pi(this),this.readyState==3&&Hm(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,Vi(this))};y.Ya=function(t){this.g&&(this.response=t,Vi(this))};y.ka=function(){this.g&&Vi(this)};function Vi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pi(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var PA=C.JSON.parse;function K(t){ce.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Wm,this.L=this.M=!1}le(K,ce);var Wm="",NA=/^https?$/i,kA=["POST","PUT"];y=K.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yl.g(),this.C=this.u?tm(this.u):tm(yl),this.g.onreadystatechange=ve(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){im(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=C.FormData&&t instanceof C.FormData,!(0<=cm(kA,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ym(this),0<this.B&&((this.L=OA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ve(this.ua,this)):this.A=Fl(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){im(this,s)}};function OA(t){return sr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof Dl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ge(this,"timeout"),this.abort(8))};function im(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Km(t),xo(t)}function Km(t){t.F||(t.F=!0,ge(t,"complete"),ge(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ge(this,"complete"),ge(this,"abort"),xo(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xo(this,!0)),K.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?Qm(this):this.kb())};y.kb=function(){Qm(this)};function Qm(t){if(t.h&&typeof Dl<"u"&&(!t.C[1]||Ze(t)!=4||t.da()!=2)){if(t.v&&Ze(t)==4)Fl(t.La,0,t);else if(ge(t,"readystatechange"),Ze(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Lm)[1]||null;!i&&C.self&&C.self.location&&(i=C.self.location.protocol.slice(0,-1)),r=!NA.test(i?i.toLowerCase():"")}n=r}if(n)ge(t,"complete"),ge(t,"success");else{t.m=6;try{var s=2<Ze(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Km(t)}}finally{xo(t)}}}}function xo(t,e){if(t.g){Ym(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ge(t,"ready");try{n.onreadystatechange=r}catch{}}}function Ym(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(C.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function Ze(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<Ze(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),PA(e)}};function sm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Wm:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function MA(t){let e={};t=(t.g&&2<=Ze(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ti(t[r]))continue;var n=oA(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}nA(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Jm(t){let e="";return Cl(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function $l(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jm(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):G(t,e,n))}function vi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xm(t){this.Ga=0,this.j=[],this.l=new Ro,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vi("baseRetryDelayMs",5e3,t),this.hb=vi("retryDelaySeedMs",1e4,t),this.eb=vi("forwardChannelMaxRetries",2,t),this.xa=vi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $m(t&&t.concurrentRequestLimit),this.Ja=new CA,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=Xm.prototype;y.ra=8;y.H=1;function jl(t){if(Zm(t),t.H==3){var e=t.W++,n=_t(t.I);if(G(n,"SID",t.K),G(n,"RID",e),G(n,"TYPE","terminate"),Ui(t,n),e=new Fi(t,t.l,e),e.L=2,e.A=Mo(_t(n)),n=!1,C.navigator&&C.navigator.sendBeacon)try{n=C.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&C.Image&&(new Image().src=e.A,n=!0),n||(e.g=ay(e.l,null),e.g.ha(e.A)),e.G=Date.now(),xi(e)}sy(t)}function Lo(t){t.g&&(ql(t),t.g.cancel(),t.g=null)}function Zm(t){Lo(t),t.u&&(C.clearTimeout(t.u),t.u=null),wo(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&C.clearTimeout(t.m),t.m=null)}function Vo(t){if(!jm(t.i)&&!t.m){t.m=!0;var e=t.Na;Ai||Em(),Si||(Ai(),Si=!0),Ol.add(e,t),t.C=0}}function FA(t,e){return zm(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Oi(ve(t.Na,t,e),iy(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Fi(this,this.l,t),s=this.s;if(this.U&&(s?(s=fm(s),pm(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ey(this,i,e),n=_t(this.I),G(n,"RID",t),G(n,"CVER",22),this.F&&G(n,"X-HTTP-Session-Id",this.F),Ui(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Jm(s)))+"&"+e:this.o&&$l(n,this.o,s)),Ul(this.i,i),this.bb&&G(n,"TYPE","init"),this.P?(G(n,"$req",e),G(n,"SID","null"),i.aa=!0,_l(i,n,null)):_l(i,n,e),this.H=2}}else this.H==3&&(t?om(this,t):this.j.length==0||jm(this.i)||om(this))};function om(t,e){var n;e?n=e.m:n=t.W++;let r=_t(t.I);G(r,"SID",t.K),G(r,"RID",n),G(r,"AID",t.V),Ui(t,r),t.o&&t.s&&$l(r,t.o,t.s),n=new Fi(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ey(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ul(t.i,n),_l(n,r,e)}function Ui(t,e){t.na&&Cl(t.na,function(n,r){G(e,r,n)}),t.h&&xm({},function(n,r){G(e,r,n)})}function ey(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ve(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{bA(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function ty(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ai||Em(),Si||(Ai(),Si=!0),Ol.add(e,t),t.A=0}}function zl(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Oi(ve(t.Ma,t),iy(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,ny(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Oi(ve(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ie(10),Lo(this),ny(this))};function ql(t){t.B!=null&&(C.clearTimeout(t.B),t.B=null)}function ny(t){t.g=new Fi(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=_t(t.wa);G(e,"RID","rpc"),G(e,"SID",t.K),G(e,"AID",t.V),G(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&G(e,"TO",t.qa),G(e,"TYPE","xmlhttp"),Ui(t,e),t.o&&t.s&&$l(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Mo(_t(e)),n.u=null,n.S=!0,km(n,t)}y.ib=function(){this.v!=null&&(this.v=null,Lo(this),zl(this),Ie(19))};function wo(t){t.v!=null&&(C.clearTimeout(t.v),t.v=null)}function ry(t,e){var n=null;if(t.g==e){wo(t),ql(t),t.g=null;var r=2}else if(El(t.i,e))n=e.F,qm(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Po(),ge(r,new Cm(r,n)),Vo(t)}else ty(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&FA(t,e)||r==2&&zl(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:pn(t,5);break;case 4:pn(t,10);break;case 3:pn(t,6);break;default:pn(t,2)}}}function iy(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function pn(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ve(t.pb,t);n||(n=new gn("//www.google.com/images/cleardot.gif"),C.location&&C.location.protocol=="http"||vo(n,"https"),Mo(n)),RA(n.toString(),r)}else Ie(2);t.H=0,t.h&&t.h.za(e),sy(t),Zm(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ie(2)):(this.l.info("Failed to ping google.com"),Ie(1))};function sy(t){if(t.H=0,t.ma=[],t.h){let e=Gm(t.i);(e.length!=0||t.j.length!=0)&&(Jg(t.ma,e),Jg(t.ma,t.j),t.i.i.length=0,Al(t.j),t.j.length=0),t.h.ya()}}function oy(t,e,n){var r=n instanceof gn?_t(n):new gn(n);if(r.g!="")e&&(r.g=e+"."+r.g),_o(r,r.m);else{var i=C.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new gn(null);r&&vo(s,r),e&&(s.g=e),i&&_o(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&G(r,n,e),G(r,"VER",t.ra),Ui(t,r),r}function ay(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new K(new Li({ob:n})):new K(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function uy(){}y=uy.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function Eo(){if(sr&&!(10<=Number(XD)))throw Error("Environmental error: no available transport.")}Eo.prototype.g=function(t,e){return new Re(t,e)};function Re(t,e){ce.call(this),this.g=new Xm(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ti(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ti(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ar(this)}le(Re,ce);Re.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ie(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=oy(t,null,t.Y),Vo(t)};Re.prototype.close=function(){jl(this.g)};Re.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=kl(t),t=n);e.j.push(new DA(e.fb++,t)),e.H==3&&Vo(e)};Re.prototype.N=function(){this.g.h=null,delete this.j,jl(this.g),delete this.g,Re.$.N.call(this)};function cy(t){Ll.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}le(cy,Ll);function ly(){Vl.call(this),this.status=1}le(ly,Vl);function ar(t){this.g=t}le(ar,uy);ar.prototype.Ba=function(){ge(this.g,"a")};ar.prototype.Aa=function(t){ge(this.g,new cy(t))};ar.prototype.za=function(t){ge(this.g,new ly)};ar.prototype.ya=function(){ge(this.g,"b")};function xA(){this.blockSize=-1}function $e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}le($e,xA);$e.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function al(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}$e.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)al(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){al(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){al(this,r),i=0;break}}this.h=i,this.i+=e};$e.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function $(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var LA={};function Gl(t){return-128<=t&&128>t?QD(t,function(e){return new $([e|0],0>e?-1:0)}):new $([t|0],0>t?-1:0)}function et(t){if(isNaN(t)||!isFinite(t))return ir;if(0>t)return pe(et(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Il;return new $(e,0)}function hy(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pe(hy(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=et(Math.pow(e,8)),r=ir,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=et(Math.pow(e,s)),r=r.R(s).add(et(o))):(r=r.R(n),r=r.add(et(o)))}return r}var Il=4294967296,ir=Gl(0),Tl=Gl(1),am=Gl(16777216);y=$.prototype;y.ea=function(){if(Ve(this))return-pe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Il+r)*e,e*=Il}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(vt(this))return"0";if(Ve(this))return"-"+pe(this).toString(t);for(var e=et(Math.pow(t,6)),n=this,r="";;){var i=To(n,e).g;n=Io(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,vt(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function vt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ve(t){return t.h==-1}y.X=function(t){return t=Io(this,t),Ve(t)?-1:vt(t)?0:1};function pe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new $(n,~t.h).add(Tl)}y.abs=function(){return Ve(this)?pe(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new $(n,n[n.length-1]&-2147483648?-1:0)};function Io(t,e){return t.add(pe(e))}y.R=function(t){if(vt(this)||vt(t))return ir;if(Ve(this))return Ve(t)?pe(this).R(pe(t)):pe(pe(this).R(t));if(Ve(t))return pe(this.R(pe(t)));if(0>this.X(am)&&0>t.X(am))return et(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,yo(n,2*r+2*i),n[2*r+2*i+1]+=s*u,yo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,yo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,yo(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new $(n,0)};function yo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function _i(t,e){this.g=t,this.h=e}function To(t,e){if(vt(e))throw Error("division by zero");if(vt(t))return new _i(ir,ir);if(Ve(t))return e=To(pe(t),e),new _i(pe(e.g),pe(e.h));if(Ve(e))return e=To(t,pe(e)),new _i(pe(e.g),e.h);if(30<t.g.length){if(Ve(t)||Ve(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Tl,r=e;0>=r.X(t);)n=um(n),r=um(r);var i=nr(n,1),s=nr(r,1);for(r=nr(r,2),n=nr(n,2);!vt(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=nr(r,1),n=nr(n,1)}return e=Io(t,i.R(e)),new _i(i,e)}for(i=ir;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=et(n),o=s.R(e);Ve(o)||0<o.X(t);)n-=r,s=et(n),o=s.R(e);vt(s)&&(s=Tl),i=i.add(s),t=Io(t,o)}return new _i(i,t)}y.gb=function(t){return To(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new $(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new $(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new $(n,this.h^t.h)};function um(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new $(n,t.h)}function nr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new $(i,t.h)}Eo.prototype.createWebChannel=Eo.prototype.g;Re.prototype.send=Re.prototype.u;Re.prototype.open=Re.prototype.m;Re.prototype.close=Re.prototype.close;No.NO_ERROR=0;No.TIMEOUT=8;No.HTTP_ERROR=6;bm.COMPLETE="complete";Rm.EventType=Mi;Mi.OPEN="a";Mi.CLOSE="b";Mi.ERROR="c";Mi.MESSAGE="d";ce.prototype.listen=ce.prototype.O;K.prototype.listenOnce=K.prototype.P;K.prototype.getLastError=K.prototype.Sa;K.prototype.getLastErrorCode=K.prototype.Ia;K.prototype.getStatus=K.prototype.da;K.prototype.getResponseJson=K.prototype.Wa;K.prototype.getResponseText=K.prototype.ja;K.prototype.send=K.prototype.ha;K.prototype.setWithCredentials=K.prototype.Oa;$e.prototype.digest=$e.prototype.l;$e.prototype.reset=$e.prototype.reset;$e.prototype.update=$e.prototype.j;$.prototype.add=$.prototype.add;$.prototype.multiply=$.prototype.R;$.prototype.modulo=$.prototype.gb;$.prototype.compare=$.prototype.X;$.prototype.toNumber=$.prototype.ea;$.prototype.toString=$.prototype.toString;$.prototype.getBits=$.prototype.D;$.fromNumber=et;$.fromString=hy;var dy=je.createWebChannelTransport=function(){return new Eo},fy=je.getStatEventTarget=function(){return Po()},Uo=je.ErrorCode=No,py=je.EventType=bm,gy=je.Event=mn,Hl=je.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hN=je.FetchXmlHttpFactory=Li,Bi=je.WebChannel=Rm,my=je.XhrIo=K,yy=je.Md5=$e,yn=je.Integer=$;var vy="@firebase/firestore";var he=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");var Sr="10.11.0";var Tn=new Pt("@firebase/firestore");function $i(){return Tn.logLevel}function v(t,...e){if(Tn.logLevel<=M.DEBUG){let n=e.map(xd);Tn.debug(`Firestore (${Sr}): ${t}`,...n)}}function ot(t,...e){if(Tn.logLevel<=M.ERROR){let n=e.map(xd);Tn.error(`Firestore (${Sr}): ${t}`,...n)}}function pr(t,...e){if(Tn.logLevel<=M.WARN){let n=e.map(xd);Tn.warn(`Firestore (${Sr}): ${t}`,...n)}}function xd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function S(t="Unexpected state"){let e=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: `+t;throw ot(e),new Error(e)}function q(t,e){t||S()}function R(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=class extends be{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var qo=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Jl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(he.UNAUTHENTICATED))}shutdown(){}},Xl=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Zl=class{constructor(e){this.t=e,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>d(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{v("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(v("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(v("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(q(typeof r.accessToken=="string"),new qo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string"),new he(e)}},eh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},th=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new eh(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},rh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&v("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,v("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{v("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):v("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(q(typeof n.token=="string"),this.R=n.token,new nh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function VA(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Go=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=VA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function V(t,e){return t<e?-1:t>e?1:0}function gr(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var me=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?V(this.nanoseconds,e.nanoseconds):V(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var P=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new me(0,0))}static max(){return new t(new me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ho=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&S(),r===void 0?r=e.length-n:r>e.length-n&&S(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},H=class t extends Ho{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},UA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ne=class t extends Ho{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return UA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new _(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var T=class t{constructor(e){this.path=e}static fromPath(e){return new t(H.fromString(e))}static fromName(e){return new t(H.fromString(e).popFirst(5))}static empty(){return new t(H.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&H.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return H.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new H(e.slice()))}};var ih=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};ih.UNKNOWN_ID=-1;function BA(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=P.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new Dn(i,T.empty(),e)}function $A(t){return new Dn(t.readTime,t.key,-1)}var Dn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(P.min(),T.empty(),-1)}static max(){return new t(P.max(),T.empty(),-1)}};function jA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=T.comparator(t.documentKey,e.documentKey),n!==0?n:V(t.largestBatchId,e.largestBatchId))}var zA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ss(t){return d(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==zA)throw t;v("LocalStore","Unexpectedly lost primary lease")})}var m=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var oh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new In(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Ld(r.target.error);this.V.reject(new In(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new In(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(v("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new uh(n)}},Wo=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(W())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return v("SimpleDb","Removing database:",e),vn(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Vs())return!1;if(t.C())return!0;let e=W(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return d(this,null,function*(){return this.db||(v("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new In(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new _(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new _(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new In(e,o))},i.onupgradeneeded=s=>{v("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{v("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return d(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=oh.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),m.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&o<3;if(v("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},ah=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return vn(this.k.delete())}},In=class extends _{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function os(t){return t.name==="IndexedDbTransactionError"}var uh=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(v("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(v("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vn(r)}add(e){return v("SimpleDb","ADD",this.store.name,e,e),vn(this.store.add(e))}get(e){return vn(this.store.get(e)).next(n=>(n===void 0&&(n=null),v("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return v("SimpleDb","DELETE",this.store.name,e),vn(this.store.delete(e))}count(){return v("SimpleDb","COUNT",this.store.name),vn(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new m((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new m((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){v("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new m((r,i)=>{n.onerror=s=>{let o=Ld(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new m((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let u=new ah(a),c=n(a.primaryKey,a.value,u);if(c instanceof m){let l=c.catch(h=>(u.done(),m.reject(h)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>m.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function vn(t){return new m((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Ld(r.target.error);n(i)}})}var _y=!1;function Ld(t){let e=Wo.S(W());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new _("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _y||(_y=!0,setTimeout(()=>{throw r},0)),r}}return t}var Xy=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Ia(t){return t==null}function Wi(t){return t===0&&1/t==-1/0}function qA(t){return typeof t=="number"&&Number.isInteger(t)&&!Wi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var GA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EN=[...GA,"documentOverlays"],HA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WA=HA,IN=[...WA,"indexConfiguration","indexState","indexEntries"];function wy(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nn(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zy(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Y=class t{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hr(this.root,e,this.comparator,!1)}getReverseIterator(){return new hr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hr(this.root,e,this.comparator,!0)}},hr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();let e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}};rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ee=class t{constructor(e){this.comparator=e,this.data=new Y(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ko(this.data.getIterator())}getIteratorFrom(e){return new Ko(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ko=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ue=class t{constructor(e){this.fields=e,e.sort(Ne.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ee(Ne.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gr(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Qo=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Te=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Qo("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return V(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Te.EMPTY_BYTE_STRING=new Te("");var KA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Et(t){if(q(!!t),typeof t=="string"){let e=0,n=KA.exec(t);if(q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Q(t.seconds),nanos:Q(t.nanos)}}function Q(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jt(t){return typeof t=="string"?Te.fromBase64String(t):Te.fromUint8Array(t)}function Vd(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ud(t){let e=t.mapValue.fields.__previous_value__;return Vd(e)?Ud(e):e}function Ki(t){let e=Et(t.mapValue.fields.__local_write_time__.timestampValue);return new me(e.seconds,e.nanos)}var ch=class{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Yo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Bo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function An(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vd(t)?4:ev(t)?9007199254740991:10:S()}function at(t,e){if(t===e)return!0;let n=An(t);if(n!==An(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ki(t).isEqual(Ki(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Et(i.timestampValue),a=Et(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return jt(i.bytesValue).isEqual(jt(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Q(i.geoPointValue.latitude)===Q(s.geoPointValue.latitude)&&Q(i.geoPointValue.longitude)===Q(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Q(i.integerValue)===Q(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Q(i.doubleValue),a=Q(s.doubleValue);return o===a?Wi(o)===Wi(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return gr(t.arrayValue.values||[],e.arrayValue.values||[],at);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wy(o)!==wy(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!at(o[u],a[u])))return!1;return!0}(t,e);default:return S()}}function Qi(t,e){return(t.values||[]).find(n=>at(n,e))!==void 0}function mr(t,e){if(t===e)return 0;let n=An(t),r=An(e);if(n!==r)return V(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return V(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Q(s.integerValue||s.doubleValue),u=Q(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Ey(t.timestampValue,e.timestampValue);case 4:return Ey(Ki(t),Ki(e));case 5:return V(t.stringValue,e.stringValue);case 6:return function(s,o){let a=jt(s),u=jt(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=V(a[c],u[c]);if(l!==0)return l}return V(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=V(Q(s.latitude),Q(o.latitude));return a!==0?a:V(Q(s.longitude),Q(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=mr(a[c],u[c]);if(l)return l}return V(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Bo.mapValue&&o===Bo.mapValue)return 0;if(s===Bo.mapValue)return 1;if(o===Bo.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let h=0;h<u.length&&h<l.length;++h){let f=V(u[h],l[h]);if(f!==0)return f;let p=mr(a[u[h]],c[l[h]]);if(p!==0)return p}return V(u.length,l.length)}(t.mapValue,e.mapValue);default:throw S()}}function Ey(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return V(t,e);let n=Et(t),r=Et(e),i=V(n.seconds,r.seconds);return i!==0?i:V(n.nanos,r.nanos)}function yr(t){return lh(t)}function lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Et(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jt(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return T.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=lh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${lh(n.fields[o])}`;return i+"}"}(t.mapValue):S()}function Iy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hh(t){return!!t&&"integerValue"in t}function Bd(t){return!!t&&"arrayValue"in t}function Ty(t){return!!t&&"nullValue"in t}function Dy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jo(t){return!!t&&"mapValue"in t}function zi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Nn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zi(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ev(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Pe=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zi(n)}setAll(e){let n=Ne.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=zi(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());jo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return at(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Nn(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(zi(this.value))}};function tv(t){let e=[];return Nn(t.fields,(n,r)=>{let i=new Ne([n]);if(jo(r)){let s=tv(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ue(e)}var ze=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,P.min(),P.min(),P.min(),Pe.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,P.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,P.min(),P.min(),Pe.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,P.min(),P.min(),Pe.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(P.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=P.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var vr=class{constructor(e,n){this.position=e,this.inclusive=n}};function Ay(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=T.comparator(T.fromName(o.referenceValue),n.key):r=mr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!at(t.position[n],e.position[n]))return!1;return!0}var Sn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function QA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Jo=class{},ne=class t extends Jo{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fh(e,n,r):n==="array-contains"?new mh(e,r):n==="in"?new yh(e,r):n==="not-in"?new vh(e,r):n==="array-contains-any"?new _h(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ph(e,r):new gh(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mr(n,this.value)):n!==null&&An(this.value)===An(n)&&this.matchesComparison(mr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},qe=class t extends Jo{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return nv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function nv(t){return t.op==="and"}function rv(t){return YA(t)&&nv(t)}function YA(t){for(let e of t.filters)if(e instanceof qe)return!1;return!0}function dh(t){if(t instanceof ne)return t.field.canonicalString()+t.op.toString()+yr(t.value);if(rv(t))return t.filters.map(e=>dh(e)).join(",");{let e=t.filters.map(n=>dh(n)).join(",");return`${t.op}(${e})`}}function iv(t,e){return t instanceof ne?function(r,i){return i instanceof ne&&r.op===i.op&&r.field.isEqual(i.field)&&at(r.value,i.value)}(t,e):t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&iv(o,i.filters[a]),!0):!1}(t,e):void S()}function sv(t){return t instanceof ne?function(n){return`${n.field.canonicalString()} ${n.op} ${yr(n.value)}`}(t):t instanceof qe?function(n){return n.op.toString()+" {"+n.getFilters().map(sv).join(" ,")+"}"}(t):"Filter"}var fh=class extends ne{constructor(e,n,r){super(e,n,r),this.key=T.fromName(r.referenceValue)}matches(e){let n=T.comparator(e.key,this.key);return this.matchesComparison(n)}},ph=class extends ne{constructor(e,n){super(e,"in",n),this.keys=ov("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gh=class extends ne{constructor(e,n){super(e,"not-in",n),this.keys=ov("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ov(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>T.fromName(r.referenceValue))}var mh=class extends ne{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Bd(n)&&Qi(n.arrayValue,this.value)}},yh=class extends ne{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qi(this.value.arrayValue,n)}},vh=class extends ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Qi(this.value.arrayValue,n)}},_h=class extends ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Bd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qi(this.value.arrayValue,r))}};var wh=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Cy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new wh(t,e,n,r,i,s,o)}function $d(t){let e=R(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ia(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yr(r)).join(",")),e.ce=n}return e.ce}function jd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sy(t.startAt,e.startAt)&&Sy(t.endAt,e.endAt)}function Eh(t){return T.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var zt=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function JA(t,e,n,r,i,s,o,a){return new zt(t,e,n,r,i,s,o,a)}function zd(t){return new zt(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function av(t){return t.collectionGroup!==null}function qi(t){let e=R(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ee(Ne.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Sn(s,r))}),n.has(Ne.keyField().canonicalString())||e.le.push(new Sn(Ne.keyField(),r))}return e.le}function it(t){let e=R(t);return e.he||(e.he=XA(e,qi(t))),e.he}function XA(t,e){if(t.limitType==="F")return Cy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Sn(i.field,s)});let n=t.endAt?new vr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vr(t.startAt.position,t.startAt.inclusive):null;return Cy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ih(t,e){let n=t.filters.concat([e]);return new zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Th(t,e,n){return new zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ta(t,e){return jd(it(t),it(e))&&t.limitType===e.limitType}function uv(t){return`${$d(it(t))}|lt:${t.limitType}`}function ur(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sv(i)).join(", ")}]`),Ia(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yr(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yr(i)).join(",")),`Target(${r})`}(it(t))}; limitType=${t.limitType})`}function Da(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):T.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of qi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let c=Ay(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,qi(r),i)||r.endAt&&!function(o,a,u){let c=Ay(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,qi(r),i))}(t,e)}function ZA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cv(t){return(e,n)=>{let r=!1;for(let i of qi(t)){let s=eS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eS(t,e,n){let r=t.field.isKeyField()?T.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?mr(u,c):S()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return S()}}var qt=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nn(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Zy(this.inner)}size(){return this.innerSize}};var tS=new Y(T.comparator);function It(){return tS}var lv=new Y(T.comparator);function ji(...t){let e=lv;for(let n of t)e=e.insert(n.key,n);return e}function hv(t){let e=lv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _n(){return Gi()}function dv(){return Gi()}function Gi(){return new qt(t=>t.toString(),(t,e)=>t.isEqual(e))}var nS=new Y(T.comparator),rS=new Ee(T.comparator);function F(...t){let e=rS;for(let n of t)e=e.add(n);return e}var iS=new Ee(V);function sS(){return iS}function fv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wi(e)?"-0":e}}function pv(t){return{integerValue:""+t}}function oS(t,e){return qA(e)?pv(e):fv(t,e)}var _r=class{constructor(){this._=void 0}};function aS(t,e,n){return t instanceof wr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Vd(s)&&(s=Ud(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Cn?mv(t,e):t instanceof bn?yv(t,e):function(i,s){let o=gv(i,s),a=Ry(o)+Ry(i.Ie);return hh(o)&&hh(i.Ie)?pv(a):fv(i.serializer,a)}(t,e)}function uS(t,e,n){return t instanceof Cn?mv(t,e):t instanceof bn?yv(t,e):n}function gv(t,e){return t instanceof Er?function(r){return hh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var wr=class extends _r{},Cn=class extends _r{constructor(e){super(),this.elements=e}};function mv(t,e){let n=vv(e);for(let r of t.elements)n.some(i=>at(i,r))||n.push(r);return{arrayValue:{values:n}}}var bn=class extends _r{constructor(e){super(),this.elements=e}};function yv(t,e){let n=vv(e);for(let r of t.elements)n=n.filter(i=>!at(i,r));return{arrayValue:{values:n}}}var Er=class extends _r{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function Ry(t){return Q(t.integerValue||t.doubleValue)}function vv(t){return Bd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Cn&&i instanceof Cn||r instanceof bn&&i instanceof bn?gr(r.elements,i.elements,at):r instanceof Er&&i instanceof Er?at(r.Ie,i.Ie):r instanceof wr&&i instanceof wr}(t.transform,e.transform)}var Dh=class{constructor(e,n){this.version=e,this.transformResults=n}},wt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ir=class{};function _v(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yi(t.key,wt.none()):new Rn(t.key,t.data,wt.none());{let n=t.data,r=Pe.empty(),i=new Ee(Ne.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ut(t.key,r,new Ue(i.toArray()),wt.none())}}function lS(t,e,n){t instanceof Rn?function(i,s,o){let a=i.value.clone(),u=Ny(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ut?function(i,s,o){if(!zo(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Ny(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(wv(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hi(t,e,n,r){return t instanceof Rn?function(s,o,a,u){if(!zo(s.precondition,o))return a;let c=s.value.clone(),l=ky(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ut?function(s,o,a,u){if(!zo(s.precondition,o))return a;let c=ky(s.fieldTransforms,u,o),l=o.data;return l.setAll(wv(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return zo(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function hS(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=gv(r.transform,i||null);s!=null&&(n===null&&(n=Pe.empty()),n.set(r.field,s))}return n||null}function Py(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gr(r,i,(s,o)=>cS(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Rn=class extends Ir{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ut=class extends Ir{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function wv(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Ny(t,e,n){let r=new Map;q(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uS(o,a,n[i]))}return r}function ky(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,aS(s,o,e))}return r}var Yi=class extends Ir{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ah=class extends Ir{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sh=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&lS(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=dv();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=_v(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(P.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),F())}isEqual(e){return this.batchId===e.batchId&&gr(this.mutations,e.mutations,(n,r)=>Py(n,r))&&gr(this.baseMutations,e.baseMutations,(n,r)=>Py(n,r))}},Ch=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){q(e.mutations.length===r.length);let i=function(){return nS}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var bh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rh=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ee,x;function dS(t){switch(t){default:return S();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function Ev(t){if(t===void 0)return ot("GRPC error has no .code"),g.UNKNOWN;switch(t){case ee.OK:return g.OK;case ee.CANCELLED:return g.CANCELLED;case ee.UNKNOWN:return g.UNKNOWN;case ee.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ee.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ee.INTERNAL:return g.INTERNAL;case ee.UNAVAILABLE:return g.UNAVAILABLE;case ee.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ee.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ee.NOT_FOUND:return g.NOT_FOUND;case ee.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ee.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ee.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ee.ABORTED:return g.ABORTED;case ee.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ee.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ee.DATA_LOSS:return g.DATA_LOSS;default:return S()}}(x=ee||(ee={}))[x.OK=0]="OK",x[x.CANCELLED=1]="CANCELLED",x[x.UNKNOWN=2]="UNKNOWN",x[x.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",x[x.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",x[x.NOT_FOUND=5]="NOT_FOUND",x[x.ALREADY_EXISTS=6]="ALREADY_EXISTS",x[x.PERMISSION_DENIED=7]="PERMISSION_DENIED",x[x.UNAUTHENTICATED=16]="UNAUTHENTICATED",x[x.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",x[x.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",x[x.ABORTED=10]="ABORTED",x[x.OUT_OF_RANGE=11]="OUT_OF_RANGE",x[x.UNIMPLEMENTED=12]="UNIMPLEMENTED",x[x.INTERNAL=13]="INTERNAL",x[x.UNAVAILABLE=14]="UNAVAILABLE",x[x.DATA_LOSS=15]="DATA_LOSS";var Oy=null;function fS(){return new TextEncoder}var pS=new yn([4294967295,4294967295],0);function My(t){let e=fS().encode(t),n=new yy;return n.update(e),new Uint8Array(n.digest())}function Fy(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yn([n,r],0),new yn([i,s],0)]}var Ph=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wn(`Invalid padding: ${n}`);if(r<0)throw new wn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wn(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wn(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=yn.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(yn.fromNumber(r)));return i.compare(pS)===1&&(i=new yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=My(e),[r,i]=Fy(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=My(e),[r,i]=Fy(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},wn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xo=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ji.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(P.min(),i,new Y(V),It(),F())}},Ji=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,F(),F(),F())}};var dr=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Zo=class{constructor(e,n){this.targetId=e,this.fe=n}},ea=class{constructor(e,n,r=Te.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ta=class{constructor(){this.ge=0,this.pe=Ly(),this.ye=Te.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=F(),n=F(),r=F();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:S()}}),new Ji(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Ly()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,q(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Nh=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=It(),this.Qe=xy(),this.Ke=new Y(V)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:S()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Eh(s))if(r===0){let o=new T(s.path);this.We(n,o,ze.newNoDocument(o,P.min()))}else q(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),u=a?this.et(a,e,o):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}Oy?.tt(function(l,h,f,p,E){var I,w,O,z,J,ye;let Ge={localCacheCount:l,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},se=h.unchangedNames;return se&&(Ge.bloomFilter={applied:E===0,hashCount:(I=se?.hashCount)!==null&&I!==void 0?I:0,bitmapLength:(z=(O=(w=se?.bits)===null||w===void 0?void 0:w.bitmap)===null||O===void 0?void 0:O.length)!==null&&z!==void 0?z:0,padding:(ye=(J=se?.bits)===null||J===void 0?void 0:J.padding)!==null&&ye!==void 0?ye:0,mightContain:ct=>{var On;return(On=p?.mightContain(ct))!==null&&On!==void 0&&On}}),Ge}(o,e.fe,this.Be.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=jt(r).toUint8Array()}catch(u){if(u instanceof Qo)return pr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ph(o,i,s)}catch(u){return pr(u instanceof wn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Eh(a.target)){let u=new T(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,ze.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=F();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Xo(e,n,this.Ke,this.qe,r);return this.qe=It(),this.Qe=xy(),this.Ke=new Y(V),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ta,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ee(V),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||v("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new ta),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function xy(){return new Y(T.comparator)}function Ly(){return new Y(T.comparator)}var gS={asc:"ASCENDING",desc:"DESCENDING"},mS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yS={and:"AND",or:"OR"},kh=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Oh(t,e){return t.useProto3Json||Ia(e)?e:{value:e}}function na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vS(t,e){return na(t,e.toTimestamp())}function st(t){return q(!!t),P.fromTimestamp(function(n){let r=Et(n);return new me(r.seconds,r.nanos)}(t))}function qd(t,e){return Mh(t,e).canonicalString()}function Mh(t,e){let n=function(i){return new H(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Tv(t){let e=H.fromString(t);return q(bv(e)),e}function Fh(t,e){return qd(t.databaseId,e.path)}function Wl(t,e){let n=Tv(e);if(n.get(1)!==t.databaseId.projectId)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new T(Av(n))}function Dv(t,e){return qd(t.databaseId,e)}function _S(t){let e=Tv(t);return e.length===4?H.emptyPath():Av(e)}function xh(t){return new H(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Av(t){return q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vy(t,e,n){return{name:Fh(t,e),fields:n.value.mapValue.fields}}function wS(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:S()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(q(l===void 0||typeof l=="string"),Te.fromBase64String(l||"")):(q(l===void 0||l instanceof Buffer||l instanceof Uint8Array),Te.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?g.UNKNOWN:Ev(c.code);return new _(l,c.message||"")}(o);n=new ea(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wl(t,r.document.name),s=st(r.document.updateTime),o=r.document.createTime?st(r.document.createTime):P.min(),a=new Pe({mapValue:{fields:r.document.fields}}),u=ze.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new dr(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wl(t,r.document),s=r.readTime?st(r.readTime):P.min(),o=ze.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wl(t,r.document),s=r.removedTargetIds||[];n=new dr([],s,i,null)}else{if(!("filter"in e))return S();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Rh(i,s),a=r.targetId;n=new Zo(a,o)}}return n}function ES(t,e){let n;if(e instanceof Rn)n={update:Vy(t,e.key,e.value)};else if(e instanceof Yi)n={delete:Fh(t,e.key)};else if(e instanceof ut)n={update:Vy(t,e.key,e.data),updateMask:PS(e.fieldMask)};else{if(!(e instanceof Ah))return S();n={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof wr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Er)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw S()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:S()}(t,e.precondition)),n}function IS(t,e){return t&&t.length>0?(q(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?st(i.updateTime):st(s);return o.isEqual(P.min())&&(o=st(s)),new Dh(o,i.transformResults||[])}(n,e))):[]}function TS(t,e){return{documents:[Dv(t,e.path)]}}function DS(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Dv(t,i);let s=function(c){if(c.length!==0)return Cv(qe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(l=>function(f){return{field:cr(f.field),direction:CS(f.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Oh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function AS(t){let e=_S(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){q(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(h){let f=Sv(h);return f instanceof qe&&rv(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Sn(lr(E.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Ia(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(h){let f=!!h.before,p=h.values||[];return new vr(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){let f=!h.before,p=h.values||[];return new vr(p,f)}(n.endAt)),JA(e,i,o,s,a,"F",u,c)}function SS(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=lr(n.unaryFilter.field);return ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=lr(n.unaryFilter.field);return ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=lr(n.unaryFilter.field);return ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=lr(n.unaryFilter.field);return ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(t):t.fieldFilter!==void 0?function(n){return ne.create(lr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qe.create(n.compositeFilter.filters.map(r=>Sv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return S()}}(n.compositeFilter.op))}(t):S()}function CS(t){return gS[t]}function bS(t){return mS[t]}function RS(t){return yS[t]}function cr(t){return{fieldPath:t.canonicalString()}}function lr(t){return Ne.fromServerFormat(t.fieldPath)}function Cv(t){return t instanceof ne?function(n){if(n.op==="=="){if(Dy(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NAN"}};if(Ty(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dy(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NAN"}};if(Ty(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cr(n.field),op:bS(n.op),value:n.value}}}(t):t instanceof qe?function(n){let r=n.getFilters().map(i=>Cv(i));return r.length===1?r[0]:{compositeFilter:{op:RS(n.op),filters:r}}}(t):S()}function PS(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xi=class t{constructor(e,n,r,i,s=P.min(),o=P.min(),a=Te.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Lh=class{constructor(e){this.ct=e}};function NS(t){let e=AS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Th(e,e.limit,"L"):e}var ra=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Q(e.integerValue));else if("doubleValue"in e){let r=Q(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Wi(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Et(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(jt(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?ev(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):S()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),T.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};ra.bt=new ra;var Vh=class{constructor(){this._n=new Uh}addToCollectionParentIndex(e,n){return this._n.add(n),m.resolve()}getCollectionParents(e,n){return m.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return m.resolve()}deleteFieldIndex(e,n){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,n){return m.resolve()}getDocumentsMatchingTarget(e,n){return m.resolve(null)}getIndexType(e,n){return m.resolve(0)}getFieldIndexes(e,n){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,n){return m.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,n){return m.resolve(Dn.min())}updateCollectionGroup(e,n,r){return m.resolve()}updateIndexEntries(e,n){return m.resolve()}},Uh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ee(H.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ee(H.comparator)).toArray()}};var DN=new Uint8Array(0);var tt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};tt.DEFAULT_COLLECTION_PERCENTILE=10,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tt.DEFAULT=new tt(41943040,tt.DEFAULT_COLLECTION_PERCENTILE,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tt.DISABLED=new tt(-1,0,0);var Zi=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Bh=class{constructor(){this.changes=new qt(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?m.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $h=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var jh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hi(r.mutation,i,Ue.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,F()).next(()=>r))}getLocalViewOfDocuments(e,n,r=F()){let i=_n();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ji();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=_n();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,F()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=It(),o=Gi(),a=function(){return Gi()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof ut)?s=s.insert(c.key,c):l!==void 0?(o.set(c.key,l.mutation.getFieldMask()),Hi(l.mutation,c,l.mutation.getFieldMask(),me.now())):o.set(c.key,Ue.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var h;return a.set(c,new $h(l,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Gi(),i=new Y((o,a)=>o-a),s=F();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Ue.empty();l=a.applyToLocalView(c,l),r.set(u,l);let h=(i.get(a.batchId)||F()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,h=dv();l.forEach(f=>{if(!s.has(f)){let p=_v(n.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return T.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):av(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):m.resolve(_n()),a=-1,u=s;return o.next(c=>m.forEach(c,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{u=u.insert(l,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,F())).next(l=>({batchId:a,changes:hv(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new T(n)).next(r=>{let i=ji();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ji();return this.indexManager.getCollectionParents(e,s).next(a=>m.forEach(a,u=>{let c=function(h,f){return new zt(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{let l=c.getKey();o.get(l)===null&&(o=o.insert(l,ze.newInvalidDocument(l)))});let a=ji();return o.forEach((u,c)=>{let l=s.get(u);l!==void 0&&Hi(l.mutation,c,Ue.empty(),me.now()),Da(n,c)&&(a=a.insert(u,c))}),a})}};var zh=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return m.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:st(i.createTime)}}(n)),m.resolve()}getNamedQuery(e,n){return m.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:NS(i.bundledQuery),readTime:st(i.readTime)}}(n)),m.resolve()}};var qh=class{constructor(){this.overlays=new Y(T.comparator),this.hr=new Map}getOverlay(e,n){return m.resolve(this.overlays.get(n))}getOverlays(e,n){let r=_n();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),m.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),m.resolve()}getOverlaysForCollection(e,n,r){let i=_n(),s=n.length+1,o=new T(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return m.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Y((c,l)=>c-l),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);l===null&&(l=_n(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=_n(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return m.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bh(n,r));let s=this.hr.get(n);s===void 0&&(s=F(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var es=class{constructor(){this.Pr=new Ee(te.Ir),this.Tr=new Ee(te.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new te(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new te(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new T(new H([])),r=new te(n,e),i=new te(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new T(new H([])),r=new te(n,e),i=new te(n,e+1),s=F();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new te(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},te=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return T.comparator(e.key,n.key)||V(e.pr,n.pr)}static Er(e,n){return V(e.pr,n.pr)||T.comparator(e.key,n.key)}};var Gh=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ee(te.Ir)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sh(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new te(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,n){return m.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new te(n,0),i=new te(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(V);return n.forEach(i=>{let s=new te(i,0),o=new te(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),m.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;T.isDocumentKey(s)||(s=s.child(""));let o=new te(new T(s),0),a=new Ee(V);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},o),m.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){q(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return m.forEach(n.mutations,i=>{let s=new te(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new te(n,0),i=this.wr.firstAfterOrEqual(r);return m.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Hh=class{constructor(e){this.vr=e,this.docs=function(){return new Y(T.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return m.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(n))}getEntries(e,n){let r=It();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ze.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=It(),o=n.path,a=new T(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||jA($A(l),r)<=0||(i.has(l.key)||Da(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,n,r,i){S()}Fr(e,n){return m.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wh(this)}getSize(e){return m.resolve(this.size)}},Wh=class extends Bh{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),m.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Kh=class{constructor(e){this.persistence=e,this.Mr=new qt(n=>$d(n),jd),this.lastRemoteSnapshotVersion=P.min(),this.highestTargetId=0,this.Or=0,this.Nr=new es,this.targetCount=0,this.Lr=Zi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),m.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Zi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,m.resolve()}updateTargetData(e,n){return this.qn(n),m.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return m.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),m.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),m.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return m.resolve(r)}containsKey(e,n){return m.resolve(this.Nr.containsKey(n))}};var Qh=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Xy(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Kh(this),this.indexManager=new Vh,this.remoteDocumentCache=function(i){return new Hh(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Lh(n),this.$r=new zh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qh,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Gh(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){v("MemoryPersistence","Starting transaction:",e);let i=new Yh(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return m.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Yh=class extends sh{constructor(e){super(),this.currentSequenceNumber=e}},Jh=class t{constructor(e){this.persistence=e,this.zr=new es,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw S()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),m.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),m.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Jr,r=>{let i=T.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,P.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return m.or([()=>m.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Xh=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=F(),i=F();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Zh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ed=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Up()?8:Wo.v(W())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Zh;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?($i()<=M.DEBUG&&v("QueryEngine","SDK will not create cache indexes for query:",ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),m.resolve()):($i()<=M.DEBUG&&v("QueryEngine","Query:",ur(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?($i()<=M.DEBUG&&v("QueryEngine","The SDK decides to create cache indexes for query:",ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,it(n))):m.resolve())}ji(e,n){if(by(n))return m.resolve(null);let r=it(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Th(n,null,"F"),r=it(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=F(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,o,u.readTime)?this.ji(e,Th(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return by(n)||i.isEqual(P.min())?m.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?m.resolve(null):($i()<=M.DEBUG&&v("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ur(n)),this.es(e,o,n,BA(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ee(cv(e));return n.forEach((i,s)=>{Da(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return $i()<=M.DEBUG&&v("QueryEngine","Using full collection scan to execute query:",ur(n)),this.zi.getDocumentsMatchingQuery(e,n,Dn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var td=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Y(V),this.rs=new qt(s=>$d(s),jd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function kS(t,e,n,r){return new td(t,e,n,r)}function Rv(t,e){return d(this,null,function*(){let n=R(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=F();for(let c of i){o.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of s){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})}function OS(t,e){let n=R(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let h=c.batch,f=h.keys(),p=m.resolve();return f.forEach(E=>{p=p.next(()=>l.getEntry(u,E)).next(I=>{let w=c.docVersions.get(E);q(w!==null),I.version.compareTo(w)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),l.addEntry(I)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=F();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Pv(t){let e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function MS(t,e){let n=R(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,h)=>{let f=i.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Te.EMPTY_BYTE_STRING,P.min()).withLastLimboFreeSnapshotVersion(P.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(h,p),function(I,w,O){return I.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(f,p,l)&&a.push(n.Qr.updateTargetData(s,p))});let u=It(),c=F();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(FS(s,o,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(P.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ns=i,s))}function FS(t,e,n){let r=F(),i=F();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=It();return n.forEach((a,u)=>{let c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(P.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):v("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:i}})}function xS(t,e){let n=R(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LS(t,e){let n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Xi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function nd(t,e,n){return d(this,null,function*(){let r=R(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!os(o))throw o;v("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Uy(t,e,n){let r=R(t),i=P.min(),s=F();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){let h=R(u),f=h.rs.get(l);return f!==void 0?m.resolve(h.ns.get(f)):h.Qr.getTargetData(c,l)}(r,o,it(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:P.min(),n?s:F())).next(a=>(VS(r,ZA(e),a),{documents:a,hs:s})))}function VS(t,e,n){let r=t.ss.get(e)||P.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var ia=class{constructor(){this.activeTargetIds=sS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rd=class{constructor(){this.no=new ia,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ia,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var id=class{io(e){}shutdown(){}};var sa=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){v("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){v("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $o=null;function Kl(){return $o===null?$o=function(){return 268435456+Math.round(2147483648*Math.random())}():$o++,"0x"+$o.toString(16)}var US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sd=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var we="WebChannelConnection",od=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=Kl(),u=this.bo(n,r.toUriEncodedString());v("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,u,c,i).then(l=>(v("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw pr("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=US[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=Kl();return new Promise((o,a)=>{let u=new my;u.setWithCredentials(!0),u.listenOnce(py.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Uo.NO_ERROR:let l=u.getResponseJson();v(we,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Uo.TIMEOUT:v(we,`RPC '${e}' ${s} timed out`),a(new _(g.DEADLINE_EXCEEDED,"Request time out"));break;case Uo.HTTP_ERROR:let h=u.getStatus();if(v(we,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let E=function(w){let O=w.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(O)>=0?O:g.UNKNOWN}(p.status);a(new _(E,p.message))}else a(new _(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _(g.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{v(we,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(i);v(we,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=Kl(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dy(),a=fy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=s.join("");v(we,`Creating RPC '${e}' stream ${i}: ${l}`,u);let h=o.createWebChannel(l,u),f=!1,p=!1,E=new sd({lo:w=>{p?v(we,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(v(we,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),v(we,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},ho:()=>h.close()}),I=(w,O,z)=>{w.listen(O,J=>{try{z(J)}catch(ye){setTimeout(()=>{throw ye},0)}})};return I(h,Bi.EventType.OPEN,()=>{p||v(we,`RPC '${e}' stream ${i} transport opened.`)}),I(h,Bi.EventType.CLOSE,()=>{p||(p=!0,v(we,`RPC '${e}' stream ${i} transport closed`),E.Vo())}),I(h,Bi.EventType.ERROR,w=>{p||(p=!0,pr(we,`RPC '${e}' stream ${i} transport errored:`,w),E.Vo(new _(g.UNAVAILABLE,"The operation could not be completed")))}),I(h,Bi.EventType.MESSAGE,w=>{var O;if(!p){let z=w.data[0];q(!!z);let J=z,ye=J.error||((O=J[0])===null||O===void 0?void 0:O.error);if(ye){v(we,`RPC '${e}' stream ${i} received error:`,ye);let Ge=ye.status,se=function(br){let hs=ee[br];if(hs!==void 0)return Ev(hs)}(Ge),ct=ye.message;se===void 0&&(se=g.INTERNAL,ct="Unknown error status: "+Ge+" with message "+ye.message),p=!0,E.Vo(new _(se,ct)),h.close()}else v(we,`RPC '${e}' stream ${i} received:`,z),E.mo(z)}}),I(a,gy.STAT_EVENT,w=>{w.stat===Hl.PROXY?v(we,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Hl.NOPROXY&&v(we,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}};function Ql(){return typeof document<"u"?document:null}function Aa(t){return new kh(t,!0)}var oa=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&v("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var aa=class{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new oa(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return d(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return d(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return d(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(ot(n.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new _(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>d(this,null,function*(){this.state=0,this.start()}))}__(e){return v("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(v("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ad=class extends aa{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=wS(this.serializer,e),r=function(s){if(!("targetChange"in s))return P.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?P.min():o.readTime?st(o.readTime):P.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=xh(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Eh(u)?{documents:TS(s,u)}:{query:DS(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Iv(s,o.resumeToken);let c=Oh(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(P.min())>0){a.readTime=na(s,o.snapshotVersion.toTimestamp());let c=Oh(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=SS(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=xh(this.serializer),n.removeTarget=e,this.t_(n)}},ud=class extends aa{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=IS(e.writeResults,e.commitTime),r=st(e.commitTime);return this.listener.T_(r,n)}return q(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=xh(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>ES(this.serializer,r))};this.t_(n)}};var cd=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Mh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _(g.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Mh(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _(g.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var ld=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ot(n),this.g_=!1):v("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var hd=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>d(this,null,function*(){kn(this)&&(v("RemoteStore","Restarting streams for network reachability change."),yield function(u){return d(this,null,function*(){let c=R(u);c.v_.add(4),yield as(c),c.x_.set("Unknown"),c.v_.delete(4),yield Sa(c)})}(this))}))}),this.x_=new ld(r,i)}};function Sa(t){return d(this,null,function*(){if(kn(t))for(let e of t.F_)yield e(!0)})}function as(t){return d(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Nv(t,e){let n=R(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Kd(n)?Wd(n):Cr(n).Jo()&&Hd(n,e))}function Gd(t,e){let n=R(t),r=Cr(n);n.C_.delete(e),r.Jo()&&kv(n,e),n.C_.size===0&&(r.Jo()?r.Xo():kn(n)&&n.x_.set("Unknown"))}function Hd(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(P.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cr(t).c_(e)}function kv(t,e){t.O_.Oe(e),Cr(t).l_(e)}function Wd(t){t.O_=new Nh({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Cr(t).start(),t.x_.p_()}function Kd(t){return kn(t)&&!Cr(t).Ho()&&t.C_.size>0}function kn(t){return R(t).v_.size===0}function Ov(t){t.O_=void 0}function BS(t){return d(this,null,function*(){t.C_.forEach((e,n)=>{Hd(t,e)})})}function $S(t,e){return d(this,null,function*(){Ov(t),Kd(t)?(t.x_.S_(e),Wd(t)):t.x_.set("Unknown")})}function jS(t,e,n){return d(this,null,function*(){if(t.x_.set("Online"),e instanceof ea&&e.state===2&&e.cause)try{yield function(i,s){return d(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){v("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ua(t,r)}else if(e instanceof dr?t.O_.$e(e):e instanceof Zo?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(P.min()))try{let r=yield Pv(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=s.C_.get(c);l&&s.C_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{let l=s.C_.get(u);if(!l)return;s.C_.set(u,l.withResumeToken(Te.EMPTY_BYTE_STRING,l.snapshotVersion)),kv(s,u);let h=new Xi(l.target,u,c,l.sequenceNumber);Hd(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){v("RemoteStore","Failed to raise snapshot:",r),yield ua(t,r)}})}function ua(t,e,n){return d(this,null,function*(){if(!os(e))throw e;t.v_.add(1),yield as(t),t.x_.set("Offline"),n||(n=()=>Pv(t.localStore)),t.asyncQueue.enqueueRetryable(()=>d(this,null,function*(){v("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Sa(t)}))})}function Mv(t,e){return e().catch(n=>ua(t,n,e))}function Ca(t){return d(this,null,function*(){let e=R(t),n=Gt(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;zS(e);)try{let i=yield xS(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,qS(e,i)}catch(i){yield ua(e,i)}Fv(e)&&xv(e)})}function zS(t){return kn(t)&&t.D_.length<10}function qS(t,e){t.D_.push(e);let n=Gt(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Fv(t){return kn(t)&&!Gt(t).Ho()&&t.D_.length>0}function xv(t){Gt(t).start()}function GS(t){return d(this,null,function*(){Gt(t).d_()})}function HS(t){return d(this,null,function*(){let e=Gt(t);for(let n of t.D_)e.I_(n.mutations)})}function WS(t,e,n){return d(this,null,function*(){let r=t.D_.shift(),i=Ch.from(r,e,n);yield Mv(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ca(t)})}function KS(t,e){return d(this,null,function*(){e&&Gt(t).P_&&(yield function(r,i){return d(this,null,function*(){if(function(o){return dS(o)&&o!==g.ABORTED}(i.code)){let s=r.D_.shift();Gt(r).Zo(),yield Mv(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ca(r)}})}(t,e)),Fv(t)&&xv(t)})}function By(t,e){return d(this,null,function*(){let n=R(t);n.asyncQueue.verifyOperationInProgress(),v("RemoteStore","RemoteStore received new credentials");let r=kn(n);n.v_.add(3),yield as(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Sa(n)})}function QS(t,e){return d(this,null,function*(){let n=R(t);e?(n.v_.delete(2),yield Sa(n)):e||(n.v_.add(2),yield as(n),n.x_.set("Unknown"))})}function Cr(t){return t.N_||(t.N_=function(n,r,i){let s=R(n);return s.R_(),new ad(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:BS.bind(null,t),To:$S.bind(null,t),u_:jS.bind(null,t)}),t.F_.push(e=>d(this,null,function*(){e?(t.N_.Zo(),Kd(t)?Wd(t):t.x_.set("Unknown")):(yield t.N_.stop(),Ov(t))}))),t.N_}function Gt(t){return t.L_||(t.L_=function(n,r,i){let s=R(n);return s.R_(),new ud(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:GS.bind(null,t),To:KS.bind(null,t),E_:HS.bind(null,t),T_:WS.bind(null,t)}),t.F_.push(e=>d(this,null,function*(){e?(t.L_.Zo(),yield Ca(t)):(yield t.L_.stop(),t.D_.length>0&&(v("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var dd=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Qd(t,e){if(ot("AsyncQueue",`${e}: ${t}`),os(t))return new _(g.UNAVAILABLE,`${e}: ${t}`);throw t}var ca=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||T.comparator(n.key,r.key):(n,r)=>T.comparator(n.key,r.key),this.keyedMap=ji(),this.sortedSet=new Y(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var la=class{constructor(){this.B_=new Y(T.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):S():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Tr=class t{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ca.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ta(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var fd=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},pd=class{constructor(){this.queries=new qt(e=>uv(e),Ta),this.onlineState="Unknown",this.W_=new Set}};function YS(t,e){return d(this,null,function*(){let n=R(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new fd,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Qd(o,`Initialization of query '${ur(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&Yd(n)})}function JS(t,e){return d(this,null,function*(){let n=R(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function XS(t,e){let n=R(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&Yd(n)}function ZS(t,e,n){let r=R(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function Yd(t){t.W_.forEach(e=>{e.next()})}var gd,$y;($y=gd||(gd={})).j_="default",$y.Cache="cache";var md=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Tr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Tr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==gd.Cache}};var ha=class{constructor(e){this.key=e}},da=class{constructor(e){this.key=e}},yd=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=F(),this.mutatedKeys=F(),this.ha=cv(e),this.Pa=new ca(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new la,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,h)=>{let f=i.get(l),p=Da(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),I=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),w=!1;f&&p?f.data.isEqual(p.data)?E!==I&&(r.track({type:3,doc:p}),w=!0):this.da(f,p)||(r.track({type:2,doc:p}),w=!0,(u&&this.ha(p,u)>0||c&&this.ha(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(u||c)&&(a=!0)),w&&(p?(o=o.add(p),s=I?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((l,h)=>function(p,E){let I=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return I(p)-I(E)}(l.type,h.type)||this.ha(l.doc,h.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],u=this.la.size===0&&this.current&&!i?1:0,c=u!==this.ca;return this.ca=u,o.length!==0||c?{snapshot:new Tr(this.query,e.Pa,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new la,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=F(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new da(r))}),this.la.forEach(r=>{e.has(r)||n.push(new ha(r))}),n}fa(e){this.ua=e.hs,this.la=F();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Tr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},vd=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},_d=class{constructor(e){this.key=e,this.pa=!1}},wd=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new qt(a=>uv(a),Ta),this.Sa=new Map,this.ba=new Set,this.Da=new Y(T.comparator),this.Ca=new Map,this.va=new es,this.Fa={},this.Ma=new Map,this.xa=Zi.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function eC(t,e,n=!0){return d(this,null,function*(){let r=jv(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield Lv(r,e,n,!0),i})}function tC(t,e){return d(this,null,function*(){let n=jv(t);yield Lv(n,e,!0,!1)})}function Lv(t,e,n,r){return d(this,null,function*(){let i=yield LS(t.localStore,it(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield nC(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Nv(t.remoteStore,i),a})}function nC(t,e,n,r,i){return d(this,null,function*(){t.Na=(h,f,p)=>function(I,w,O,z){return d(this,null,function*(){let J=w.view.Ta(O);J.Xi&&(J=yield Uy(I.localStore,w.query,!1).then(({documents:ct})=>w.view.Ta(ct,J)));let ye=z&&z.targetChanges.get(w.targetId),Ge=z&&z.targetMismatches.get(w.targetId)!=null,se=w.view.applyChanges(J,I.isPrimaryClient,ye,Ge);return zy(I,w.targetId,se.Va),se.snapshot})}(t,h,f,p);let s=yield Uy(t.localStore,e,!0),o=new yd(e,s.hs),a=o.Ta(s.documents),u=Ji.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);zy(t,n,c.Va);let l=new vd(e,n,o);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot})}function rC(t,e,n){return d(this,null,function*(){let r=R(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Ta(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gd(r.remoteStore,i.targetId),Ed(r,i.targetId)}).catch(ss))):(Ed(r,i.targetId),yield nd(r.localStore,i.targetId,!0))})}function iC(t,e){return d(this,null,function*(){let n=R(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gd(n.remoteStore,r.targetId))})}function sC(t,e,n){return d(this,null,function*(){let r=dC(t);try{let i=yield function(o,a){let u=R(o),c=me.now(),l=a.reduce((p,E)=>p.add(E.key),F()),h,f;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=It(),I=F();return u.os.getEntries(p,l).next(w=>{E=w,E.forEach((O,z)=>{z.isValidDocument()||(I=I.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,E)).next(w=>{h=w;let O=[];for(let z of a){let J=hS(z,h.get(z.key).overlayedDocument);J!=null&&O.push(new ut(z.key,J,tv(J.value.mapValue),wt.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,O,a)}).next(w=>{f=w;let O=w.applyToLocalDocumentSet(h,I);return u.documentOverlayCache.saveOverlays(p,w.batchId,O)})}).then(()=>({batchId:f.batchId,changes:hv(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Fa[o.currentUser.toKey()];c||(c=new Y(V)),c=c.insert(a,u),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),yield us(r,i.changes),yield Ca(r.remoteStore)}catch(i){let s=Qd(i,"Failed to persist write");n.reject(s)}})}function Vv(t,e){return d(this,null,function*(){let n=R(t);try{let r=yield MS(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?q(o.pa):i.removedDocuments.size>0&&(q(o.pa),o.pa=!1))}),yield us(n,r,e)}catch(r){yield ss(r)}})}function jy(t,e,n){let r=R(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=R(o);u.onlineState=a;let c=!1;u.queries.forEach((l,h)=>{for(let f of h.Q_)f.G_(a)&&(c=!0)}),c&&Yd(u)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oC(t,e,n){return d(this,null,function*(){let r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Y(T.comparator);o=o.insert(s,ze.newNoDocument(s,P.min()));let a=F().add(s),u=new Xo(P.min(),new Map,new Y(V),o,a);yield Vv(r,u),r.Da=r.Da.remove(s),r.Ca.delete(e),Jd(r)}else yield nd(r.localStore,e,!1).then(()=>Ed(r,e,n)).catch(ss)})}function aC(t,e){return d(this,null,function*(){let n=R(t),r=e.batch.batchId;try{let i=yield OS(n.localStore,e);Bv(n,r,null),Uv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield us(n,i)}catch(i){yield ss(i)}})}function uC(t,e,n){return d(this,null,function*(){let r=R(t);try{let i=yield function(o,a){let u=R(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(q(h!==null),l=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);Bv(r,e,n),Uv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield us(r,i)}catch(i){yield ss(i)}})}function Uv(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function Bv(t,e,n){let r=R(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Ed(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||$v(t,r)})}function $v(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(Gd(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Jd(t))}function zy(t,e,n){for(let r of n)r instanceof ha?(t.va.addReference(r.key,e),cC(t,r)):r instanceof da?(v("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||$v(t,r.key)):S()}function cC(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(v("SyncEngine","New document in limbo: "+n),t.ba.add(r),Jd(t))}function Jd(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new T(H.fromString(e)),r=t.xa.next();t.Ca.set(r,new _d(n)),t.Da=t.Da.insert(n,r),Nv(t.remoteStore,new Xi(it(zd(n.path)),r,"TargetPurposeLimboResolution",Xy._e))}}function us(t,e,n){return d(this,null,function*(){let r=R(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,u)=>{o.push(r.Na(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=Xh.Ki(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(u,c){return d(this,null,function*(){let l=R(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>m.forEach(c,f=>m.forEach(f.qi,p=>l.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>m.forEach(f.Qi,p=>l.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!os(h))throw h;v("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let p=l.ns.get(f),E=p.snapshotVersion,I=p.withLastLimboFreeSnapshotVersion(E);l.ns=l.ns.insert(f,I)}}})}(r.localStore,s))})}function lC(t,e){return d(this,null,function*(){let n=R(t);if(!n.currentUser.isEqual(e)){v("SyncEngine","User change. New user:",e.toKey());let r=yield Rv(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(u=>{u.reject(new _(g.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield us(n,r.us)}})}function hC(t,e){let n=R(t),r=n.Ca.get(e);if(r&&r.pa)return F().add(r.key);{let i=F(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function jv(t){let e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oC.bind(null,e),e.ya.u_=XS.bind(null,e.eventManager),e.ya.La=ZS.bind(null,e.eventManager),e}function dC(t){let e=R(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uC.bind(null,e),e}var fa=class{constructor(){this.synchronizeTabs=!1}initialize(e){return d(this,null,function*(){this.serializer=Aa(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return kS(this.persistence,new ed,e.initialUser,this.serializer)}createPersistence(e){return new Qh(Jh.Hr,this.serializer)}createSharedClientState(e){return new rd}terminate(){return d(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Id=class{initialize(e,n){return d(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lC.bind(null,this.syncEngine),yield QS(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new pd}()}createDatastore(e){let n=Aa(e.databaseInfo.databaseId),r=function(s){return new od(s)}(e.databaseInfo);return function(s,o,a,u){return new cd(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new hd(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>jy(this.syncEngine,n,0),function(){return sa.D()?new sa:new id}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){let h=new wd(i,s,o,a,u,c);return l&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return d(this,null,function*(){var e;yield function(r){return d(this,null,function*(){let i=R(r);v("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield as(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Td=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Dd=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=he.UNAUTHENTICATED,this.clientId=Go.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>d(this,null,function*(){v("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(v("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>d(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Qd(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Yl(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),v("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>d(this,null,function*(){r.isEqual(i)||(yield Rv(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function qy(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield pC(t);v("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>By(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>By(e.remoteStore,i)),t._onlineComponents=e})}function fC(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function pC(t){return d(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){v("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Yl(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!fC(n))throw n;pr("Error using user provided cache. Falling back to memory cache: "+n),yield Yl(t,new fa)}}else v("FirestoreClient","Using default OfflineComponentProvider"),yield Yl(t,new fa);return t._offlineComponents})}function zv(t){return d(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(v("FirestoreClient","Using user provided OnlineComponentProvider"),yield qy(t,t._uninitializedComponentsProvider._online)):(v("FirestoreClient","Using default OnlineComponentProvider"),yield qy(t,new Id))),t._onlineComponents})}function gC(t){return zv(t).then(e=>e.syncEngine)}function Gy(t){return d(this,null,function*(){let e=yield zv(t),n=e.eventManager;return n.onListen=eC.bind(null,e.syncEngine),n.onUnlisten=rC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iC.bind(null,e.syncEngine),n})}function qv(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Hy=new Map;function Gv(t,e,n){if(!n)throw new _(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mC(t,e,n,r){if(e===!0&&r===!0)throw new _(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wy(t){if(!T.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ky(t){if(T.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ba(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":S()}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ba(t);throw new _(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var pa=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Dr=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pa({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pa(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jl;switch(r.type){case"firstParty":return new th(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Hy.get(n);r&&(v("ComponentProvider","Removing Datastore"),Hy.delete(n),r.terminate())}(this),Promise.resolve()}};function Hv(t,e,n,r={}){var i;let s=(t=Bt(t,Dr))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=he.MOCK_USER;else{a=Mp(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new _(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new he(c)}t._authCredentials=new Xl(new qo(a,u))}}var Pn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ae=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $t(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},$t=class t extends Pn{constructor(e,n,r){super(e,n,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ae(this.firestore,null,new T(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Wv(t,e,...n){if(t=Z(t),Gv("collection","path",e),t instanceof Dr){let r=H.fromString(e,...n);return Ky(r),new $t(t,null,r)}{if(!(t instanceof Ae||t instanceof $t))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(H.fromString(e,...n));return Ky(r),new $t(t.firestore,null,r)}}function Xd(t,e,...n){if(t=Z(t),arguments.length===1&&(e=Go.newId()),Gv("doc","path",e),t instanceof Dr){let r=H.fromString(e,...n);return Wy(r),new Ae(t,null,new T(r))}{if(!(t instanceof Ae||t instanceof $t))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(H.fromString(e,...n));return Wy(r),new Ae(t.firestore,t instanceof $t?t.converter:null,new T(r))}}var Ad=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new oa(this,"async_queue_retry"),this.cu=()=>{let n=Ql();n&&v("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Ql();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Ql();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new nt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return d(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!os(e))throw e;v("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ot("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=dd.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&S()}verifyOperationInProgress(){}Tu(){return d(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function Qy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Ht=class extends Dr{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Ad}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()}};function Kv(t,e){let n=typeof t=="object"?t:Yn(),r=typeof t=="string"?t:e||"(default)",i=oi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Op("firestore");s&&Hv(i,...s)}return i}function Qv(t){return t._firestoreClient||Yv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Yv(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,c,l){return new ch(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,qv(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Dd(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var ts=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Te.fromBase64String(e))}catch(n){throw new _(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Te.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ar=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ns=class{constructor(e){this._methodName=e}};var rs=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return V(this._lat,e._lat)||V(this._long,e._long)}};var yC=/^__.*__$/,Sd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ut(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rn(e,this.data,n,this.fieldTransforms)}},ga=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ut(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Jv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}var Cd=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return ya(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Jv(this.Vu)&&yC.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},bd=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Aa(e)}Cu(e,n,r,i=!1){return new Cd({Vu:e,methodName:n,Du:r,path:Ne.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zd(t){let e=t._freezeSettings(),n=Aa(t._databaseId);return new bd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vC(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);ef("Data must be an object, but it was:",o,r);let a=Xv(r,o),u,c;if(s.merge)u=new Ue(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let h of s.mergeFields){let f=Rd(e,h,n);if(!o.contains(f))throw new _(g.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);e_(l,f)||l.push(f)}u=new Ue(l),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new Sd(new Pe(a),u,c)}var ma=class t extends ns{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function _C(t,e,n,r){let i=t.Cu(1,e,n);ef("Data must be an object, but it was:",i,r);let s=[],o=Pe.empty();Nn(r,(u,c)=>{let l=tf(e,u,n);c=Z(c);let h=i.yu(l);if(c instanceof ma)s.push(l);else{let f=cs(c,h);f!=null&&(s.push(l),o.set(l,f))}});let a=new Ue(s);return new ga(o,a,i.fieldTransforms)}function wC(t,e,n,r,i,s){let o=t.Cu(1,e,n),a=[Rd(e,r,n)],u=[i];if(s.length%2!=0)throw new _(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Rd(e,s[f])),u.push(s[f+1]);let c=[],l=Pe.empty();for(let f=a.length-1;f>=0;--f)if(!e_(c,a[f])){let p=a[f],E=u[f];E=Z(E);let I=o.yu(p);if(E instanceof ma)c.push(p);else{let w=cs(E,I);w!=null&&(c.push(p),l.set(p,w))}}let h=new Ue(c);return new ga(l,h,o.fieldTransforms)}function EC(t,e,n,r=!1){return cs(n,t.Cu(r?4:3,e))}function cs(t,e){if(Zv(t=Z(t)))return ef("Unsupported field value:",e,t),Xv(t,e);if(t instanceof ns)return function(r,i){if(!Jv(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=cs(a,i.wu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Z(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=me.fromDate(r);return{timestampValue:na(i.serializer,s)}}if(r instanceof me){let s=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:na(i.serializer,s)}}if(r instanceof rs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:Iv(i.serializer,r._byteString)};if(r instanceof Ae){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qd(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${ba(r)}`)}(t,e)}function Xv(t,e){let n={};return Zy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nn(t,(r,i)=>{let s=cs(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Zv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof rs||t instanceof ts||t instanceof Ae||t instanceof ns)}function ef(t,e,n){if(!Zv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ba(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Rd(t,e,n){if((e=Z(e))instanceof Ar)return e._internalPath;if(typeof e=="string")return tf(t,e);throw ya("Field path arguments must be of type string or ",t,!1,void 0,n)}var IC=new RegExp("[~\\*/\\[\\]]");function tf(t,e,n){if(e.search(IC)>=0)throw ya(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ar(...e.split("."))._internalPath}catch{throw ya(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ya(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _(g.INVALID_ARGUMENT,a+t+u)}function e_(t,e){return t.some(n=>n.isEqual(e))}var va=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Pd=class extends va{data(){return super.data()}};function nf(t,e){return typeof e=="string"?tf(t,e):e instanceof Ar?e._internalPath:e._delegate._internalPath}function TC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var is=class{},_a=class extends is{};function t_(t,e,...n){let r=[];e instanceof is&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof kd).length,a=s.filter(u=>u instanceof Nd).length;if(o>1||o>0&&a>0)throw new _(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Nd=class t extends _a{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return r_(e._query,n),new Pn(e.firestore,e.converter,Ih(e._query,n))}_parse(e){let n=Zd(e.firestore);return function(s,o,a,u,c,l,h){let f;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new _(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Jy(h,l);let p=[];for(let E of h)p.push(Yy(u,s,E));f={arrayValue:{values:p}}}else f=Yy(u,s,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Jy(h,l),f=EC(a,o,h,l==="in"||l==="not-in");return ne.create(c,l,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var kd=class t extends is{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)r_(o,u),o=Ih(o,u)}(e._query,n),new Pn(e.firestore,e.converter,Ih(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Od=class t extends _a{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sn(s,o)}(e._query,this._field,this._direction);return new Pn(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new zt(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function n_(t,e="asc"){let n=e,r=nf("orderBy",t);return Od._create(r,n)}function Yy(t,e,n){if(typeof(n=Z(n))=="string"){if(n==="")throw new _(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!av(e)&&n.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(H.fromString(n));if(!T.isDocumentKey(r))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iy(t,new T(r))}if(n instanceof Ae)return Iy(t,n._key);throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ba(n)}.`)}function Jy(t,e){if(!Array.isArray(t)||t.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r_(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Md=class{convertValue(e,n="none"){switch(An(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Q(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw S()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Nn(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new rs(Q(e.latitude),Q(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ud(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ki(e));default:return null}}convertTimestamp(e){let n=Et(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=H.fromString(e);q(bv(r));let i=new Yo(r.get(1),r.get(3)),s=new T(r.popFirst(5));return i.isEqual(n)||ot(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function DC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var En=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},wa=class extends va{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new fr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(nf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},fr=class extends wa{data(e={}){return super.data(e)}},Fd=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new En(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fr(this._firestore,this._userDataWriter,r.key,r,new En(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new fr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new En(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new fr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new En(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:AC(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function AC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}var Ea=class extends Md{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,n)}};function i_(t,e,n,...r){t=Bt(t,Ae);let i=Bt(t.firestore,Ht),s=Zd(i),o;return o=typeof(e=Z(e))=="string"||e instanceof Ar?wC(s,"updateDoc",t._key,e,n,r):_C(s,"updateDoc",t._key,e),sf(i,[o.toMutation(t._key,wt.exists(!0))])}function s_(t){return sf(Bt(t.firestore,Ht),[new Yi(t._key,wt.none())])}function o_(t,e){let n=Bt(t.firestore,Ht),r=Xd(t),i=DC(t.converter,e);return sf(n,[vC(Zd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wt.exists(!1))]).then(()=>r)}function rf(t,...e){var n,r,i;t=Z(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Qy(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Qy(e[o])){let h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,c,l;if(t instanceof Ae)c=Bt(t.firestore,Ht),l=zd(t._key.path),u={next:h=>{e[o]&&e[o](SC(c,t,h))},error:e[o+1],complete:e[o+2]};else{let h=Bt(t,Pn);c=Bt(h.firestore,Ht),l=h._query;let f=new Ea(c);u={next:p=>{e[o]&&e[o](new Fd(c,f,h,p))},error:e[o+1],complete:e[o+2]},TC(t._query)}return function(f,p,E,I){let w=new Td(I),O=new md(p,w,E);return f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return YS(yield Gy(f),O)})),()=>{w.Qa(),f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return JS(yield Gy(f),O)}))}}(Qv(c),l,a,u)}function sf(t,e){return function(r,i){let s=new nt;return r.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return sC(yield gC(r),i,s)})),s.promise}(Qv(t),e)}function SC(t,e,n){let r=n.docs.get(e._key),i=new Ea(t);return new wa(t,i,e._key,r,new En(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Sr=i})(Ot),kt(new Le("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ht(new Zl(r.getProvider("auth-internal")),new rh(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ie(vy,"4.6.0",e),ie(vy,"4.6.0","esm2017")})();var Ra=function(){return Ra=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ra.apply(this,arguments)};var RC={includeMetadataChanges:!1};function a_(t,e){return e===void 0&&(e=RC),new Rr(function(n){var r=rf(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function u_(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Ra(Ra({},r),(n={},n[e.idField]=t.id,n))}function c_(t){return a_(t,{includeMetadataChanges:!0}).pipe(j(function(e){return e.docs}))}function l_(t,e){return e===void 0&&(e={}),c_(t).pipe(j(function(n){return n.map(function(r){return u_(r,e)})}))}var ls=class{constructor(e){return e}},h_="firestore",of=class{constructor(){return ai(h_)}};var af=new X("angularfire2.firestore-instances");function PC(t,e){let n=zs(h_,t,e);return n&&new ls(n)}function NC(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ls(r)}}var kC={provide:of,deps:[[new De,af]]},OC={provide:ls,useFactory:PC,deps:[[new De,af],pt]},MC=(()=>{class t{constructor(){ie("angularfire",an.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ht({type:t});static \u0275inj=lt({providers:[OC,kC]})}return t})();function eO(t,...e){return{ngModule:MC,providers:[{provide:af,useFactory:NC(t),multi:!0,deps:[ue,dt,Zn,un,[new De,yi],[new De,Xn],...e]}]}}var tO=fe(l_,!0);var nO=fe(o_,!0);var rO=fe(Wv,!0);var iO=fe(s_,!0);var sO=fe(Xd,!0);var oO=fe(Kv,!0);var aO=fe(n_,!0);var uO=fe(t_,!0);var cO=fe(i_,!0);export{Ln as a,zb as b,_w as c,Rp as d,TR as e,lP as f,hP as g,mi as h,iN as i,sN as j,oN as k,aN as l,uN as m,ls as n,eO as o,tO as p,nO as q,rO as r,iO as s,sO as t,oO as u,aO as v,uO as w,cO as x};
