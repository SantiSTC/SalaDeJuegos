import{a as V,b as $,c as F,d as N,e as D,f as B,i as O}from"./chunk-AUO5UMOM.js";import{a as P,b as W}from"./chunk-IFIRZPDV.js";import{$ as a,A as g,F as p,G as u,K as v,N as s,O as _,S as h,W as x,X as w,Y as b,Z as j,_ as l,aa as y,ba as M,ca as f,da as r,fa as S,g as C,ga as c,ha as d,ia as I,ja as E,ka as k,la as A,na as T}from"./chunk-YW5HSTP4.js";function X(t,o){if(t&1&&(l(0,"div",11)(1,"p",12),c(2),a(),l(3,"div",13)(4,"p",14),c(5),a()()()),t&2){let n=r(),e=n.$implicit,i=n.$index;S("id","mensaje",i,""),s(2),d(e.content),s(3),d(e.time)}}function Y(t,o){if(t&1&&(l(0,"div",15)(1,"div",16)(2,"p",17),c(3),a()(),l(4,"p",12),c(5),a(),l(6,"div",13)(7,"p",14),c(8),a()()()),t&2){let n=r().$implicit;s(3),d(n.email.split("@")[0]),s(2),d(n.content),s(3),d(n.time)}}function q(t,o){if(t&1&&h(0,X,6,4,"div",11)(1,Y,9,3),t&2){let n=o.$implicit,e=r(3);x(0,n.email==e.email?0:1)}}function z(t,o){if(t&1&&b(0,q,2,1,null,null,w),t&2){let n=r(2);j(n.mensajes)}}function J(t,o){t&1&&(l(0,"p"),c(1),a()),t&2&&(s(),I("No hay mensajes aun :,","(",""))}function K(t,o){if(t&1){let n=M();l(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),c(4,"CHAT"),a(),l(5,"p",4),f("click",function(){p(n);let i=r();return u(i.emitIsActiveChange())}),c(6,"X"),a()(),l(7,"div",5)(8,"div",6),h(9,z,2,0)(10,J,2,1),a()(),l(11,"form",7)(12,"input",8),A("ngModelChange",function(i){p(n);let m=r();return k(m.mensaje,i)||(m.mensaje=i),u(i)}),a(),l(13,"button",9),f("click",function(){p(n);let i=r();return u(i.sendMessage())}),y(14,"img",10),a()()()()}if(t&2){let n=r();s(9),x(9,n.mensajes?9:10),s(3),E("ngModel",n.mensaje)}}var ce=(()=>{let o=class o{constructor(e,i){this.auth=e,this.firestore=i,this.isActive=!1,this.isActiveChange=new v,this.email="",this.mensajes=[],this.mensaje="",this.observable=new C}emitIsActiveChange(){this.isActive=!1,this.isActiveChange.emit(this.isActive)}sendMessage(){if(this.mensaje!=""){let e=new Date,i=("0"+e.getDate()).slice(-2),m=("0"+(e.getMonth()+1)).slice(-2),H=e.getFullYear(),R=("0"+e.getHours()).slice(-2),U=("0"+e.getMinutes()).slice(-2),G=("0"+e.getSeconds()).slice(-2),L={email:this.auth.getUser()?.email,time:`${i}/${m}/${H} ${R}:${U}:${G}`,content:this.mensaje};this.firestore.guardar("mensajes",L),this.mensaje="",document.getElementById("mensaje"+(this.mensajes.length-1))?.scrollIntoView({behavior:"smooth",block:"end"})}}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}ngOnInit(){this.email=this.auth.getUser()?.email,this.observable=this.firestore.traer("mensajes","time","asc").subscribe(e=>{this.mensajes=e,setTimeout(()=>{document.getElementById("mensaje"+(this.mensajes.length-1))?.scrollIntoView({behavior:"smooth",block:"end"})},0)})}ngOnDestroy(){this.observable.unsubscribe()}};o.\u0275fac=function(i){return new(i||o)(_(W),_(P))},o.\u0275cmp=g({type:o,selectors:[["app-chat"]],inputs:{isActive:"isActive"},outputs:{isActiveChange:"isActiveChange"},standalone:!0,features:[T],decls:1,vars:1,consts:[[1,"p-3"],[1,"h-full","w-full","bg-white/25","flex","items-center","flex-col","rounded-3xl","p-2"],[1,"h-10","w-full","flex","flex-row","items-center","justify-center","shadow-xl","bg-sky-950","rounded-3xl"],[1,"text-slate-100","font-black","absolute"],[1,"text-white","font-black","ml-auto","mr-5","hover:scale-90","cursor-pointer","hover:text-red-600",3,"click"],["id","chat",1,"h-[68vh]","w-full","p-2","rounded-bl-md","overflow-y-scroll","overflow-x-hidden"],[1,"flex","flex-col","p-3","gap-4"],[1,"w-full","h-10","relative"],["type","text","name","mensaje",1,"h-10","w-full","flex","justify-center","items-center","bg-white","rounded-3xl","pl-4","pr-10",3,"ngModelChange","ngModel"],["type","submit",1,"absolute","right-0","top-0","h-10","p-1","mr-3","text-black",3,"click"],["src","/assets/home/enviar.png","alt","","height","20px","width","20px",1,"h-4","w-4","active:scale-95"],[1,"flex","flex-col","h-auto","w-4/5","p-2","bg-customBlue","text-white","rounded-xl","ml-auto",3,"id"],[1,"break-all"],[1,"mt-auto","flex","justify-end"],[1,"text-[8px]"],[1,"flex","flex-col","h-auto","w-4/5","p-2","bg-white","rounded-xl","mr-auto"],[1,"mb-auto","flex","justify-start"],[1,"text-[10px]"]],template:function(i,m){i&1&&h(0,K,15,2,"div",0),i&2&&x(0,m.isActive?0:-1)},dependencies:[O,B,V,$,F,D,N],styles:["#chat[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}#chat[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]});let t=o;return t})();export{ce as a};
